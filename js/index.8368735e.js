(function(t){function e(e){for(var a,s,i=e[0],l=e[1],c=e[2],p=0,d=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},o={index:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c605")},"0624":function(t,e,n){"use strict";var a=n("416c"),o=n.n(a);o.a},1:function(t,e){},"1dfb":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".dropzone-over{-webkit-box-shadow:0 0 5px #51cbee;box-shadow:0 0 5px #51cbee;border:1px solid #51cbee}",""]),t.exports=e},2:function(t,e){},2883:function(t,e,n){var a=n("7617");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("499e").default;o("5da5e98c",a,!0,{sourceMap:!1,shadowMode:!1})},"3caf":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,".alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}@-webkit-keyframes flash{0%{background:#fff}20%{background:#ffb}to{background:#fff}}@keyframes flash{0%{background:#fff}20%{background:#ffb}to{background:#fff}}.plan-node{text-decoration:none;color:#4d525a;display:inline-block;-webkit-transition:all .1s;transition:all .1s;position:relative;font-size:12px;margin-bottom:4px;overflow-wrap:break-word;word-wrap:break-word;width:400px}.twod .plan-node{width:240px}.twod.plan-container.compact .plan-node{width:140px}.twod.plan-container.dot .plan-node{width:50px}.plan-node .plan-node-body{position:relative;border:1px solid #dedede;border-radius:3px;background-color:#fff;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);cursor:auto}.plan-node .plan-node-body .header.card-body{cursor:pointer}.plan-node .plan-node-body .header.card-body:hover{background-color:#f7f7f7}.plan-node .plan-node-body.card .card-body,.plan-node .plan-node-body.card .card-header{padding:6px 10px}.plan-node .plan-node-body.card .card-header .card-header-tabs{margin-right:0;margin-left:0;margin-bottom:-6px;margin-top:6px}.plan-node .plan-node-body.card .card-header .card-header-tabs .nav-link{padding:3px 10px}.plan-node.parallel .plan-node-body{-webkit-box-shadow:none;box-shadow:none}.plan-node header{margin-bottom:6px;overflow:hidden}.plan-node header h4{font-size:13px;float:left;font-weight:600;margin:0;line-height:inherit}.plan-node header .node-duration{float:right;margin-left:10px;font-size:13px}.plan-node .prop-list{color:inherit;table-layout:fixed}.plan-node.highlight .plan-node-body,.plan-node.highlight .workers>div,.plan-node:hover .plan-node-body,.plan-node:hover .workers>div{border-color:#00b5e2}.plan-node.highlight:not(:hover) .plan-node-body,.plan-node.highlight:not(:hover) .workers>div{background-color:#ffb}.plan-node .node-description{text-align:left;font-style:italic;word-break:normal}.plan-node .node-description .node-type{font-weight:600;background-color:#00b5e2;color:#fff;padding:0 6px}.plan-node .btn-default{border:0}.plan-node .text-muted{color:#999ea7}.plan-node .plan-query-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:1;left:0}.plan-node .plan-query-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.plan-node .collapse-handle{cursor:pointer;position:absolute;z-index:1;bottom:0;right:0;display:none;background-color:hsla(0,0%,100%,.7)}.plan-node:hover .collapse-handle{display:block}.plan-node.never-executed .plan-node-body{background-image:linear-gradient(45deg,#f7f7f7 25%,transparent 0,transparent 50%,#f7f7f7 0,#f7f7f7 75%,transparent 0,transparent);background-size:1rem 1rem}.plan-node.flash .plan-node-body{-webkit-animation:flash 1s;animation:flash 1s}.plan-node .workers{position:absolute;left:-1px;top:1px;width:100%;height:100%;cursor:pointer}.plan-node .workers>div{border:1px solid #dedede;border-radius:3px;background-color:#fff;width:100%;height:100%;position:absolute}.plan-node .workers-handle{cursor:pointer;position:absolute;top:0;right:-5px}.plan-node .workers-handle>div{position:absolute;top:0;background-color:#fff;border:1px solid #efefef;border-radius:3px}.plan-node .workers-handle>div:hover{background-color:#f7f7f7;border-color:#dedede}.node-bar-container{height:5px;margin-top:10px;margin-bottom:3px;border-radius:6px;background-color:#dedede;position:relative}.node-bar-container .node-bar{border-radius:6px;height:100%;text-align:left;position:absolute;left:0;top:0}.node-bar-label{text-align:left;display:block}.detailed{width:400px!important}ul.node-children.collapsed .plan-node,ul.node-children.collapsed .plan-node-body{width:50px!important}ul.node-children.collapsed .plan-node{display:block}ul.node-children.collapsed .plan-node .plan-node-body{height:16.66667px}ul.node-children.collapsed .plan-node .plan-node-body *,ul.node-children.collapsed .plan-node:hover .collapse-handle{display:none}.classic .plan ul.node-children.collapsed li:before{top:7px}.classic .plan ul.node-children.collapsed li:last-child:after{height:14px}.hljs,.hljs-subst{color:#4d525a}.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-doctag,.hljs-keyword,.hljs-link,.hljs-literal,.hljs-meta-keyword,.hljs-name,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-selector-tag,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#008caf;font-weight:700}.hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#279404;font-weight:600}.hljs-section,.hljs-title{color:#008caf;font-weight:700}.hljs-comment{color:#999ea7;font-style:italic}.hljs-meta{color:#999ea7}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:600}",""]),t.exports=e},"416c":function(t,e,n){var a=n("1dfb");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("499e").default;o("b9a20a5e",a,!0,{sourceMap:!1,shadowMode:!1})},"44bc":function(t,e,n){"use strict";var a=n("2883"),o=n.n(a);o.a},"51dc":function(t,e,n){"use strict";var a=n("5681"),o=n.n(a);o.a},5681:function(t,e,n){var a=n("3caf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=n("499e").default;o("7181d17e",a,!0,{sourceMap:!1,shadowMode:!1})},7617:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"@import url(https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700|Source+Code+Pro:300,500&display=swap);"]),e.push([t.i,'.alert.c-1{background-color:#ccc;color:#454545;font-weight:700}.alert.c-1 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-1{background-color:#ccc;border-color:#ccc!important}.text-c-1{color:#ccc}.alert.c-2{background-color:#fddb61;color:#454545;font-weight:700}.alert.c-2 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-2{background-color:#fddb61;border-color:#fddb61!important}.text-c-2{color:#fddb61}.alert.c-3{background-color:#e80;color:#454545;font-weight:700}.alert.c-3 .text-muted{color:#454545!important;font-weight:400}.progress-bar.c-3{background-color:#e80;border-color:#e80!important}.text-c-3{color:#e80}.alert.c-4{background-color:#800;color:#fff;font-weight:700}.alert.c-4 .text-muted{color:#fff!important;font-weight:400}.progress-bar.c-4{background-color:#800;border-color:#800!important}.text-c-4{color:#800}.bg-hit{background-color:#ccc}.bg-read{background-color:#fddb61}.bg-dirtied{background-color:#e80}.bg-written{background-color:#800}.btn-group-xs>.btn,.btn-xs{padding:.25rem .4rem;font-size:12px;border-radius:.2rem}.btn-group-xs>.btn,.btn-group-xs>.btn .fa,.btn-xs,.btn-xs .fa{line-height:.5}@-webkit-keyframes flash{0%{background:#fff}20%{background:#ffb}to{background:#fff}}@keyframes flash{0%{background:#fff}20%{background:#ffb}to{background:#fff}}.plan-container{font-family:Noto Sans,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.plan-container .menu{position:absolute;z-index:1;right:0}.plan-container .menu-hidden h3,.plan-container .menu-hidden ul{display:none}.plan-container .grab-bing{cursor:-webkit-grab;cursor:-o-grab;cursor:grab}.plan-container .grab-bing:active{cursor:-webkit-grabbing;cursor:-o-grabbing;cursor:grabbing}.plan-container .text-muted{color:#ababab!important}.plan-container .cursor-help{cursor:help}.plan-container pre{overflow:initial}.plan-container code{font-weight:300;font-family:Source Code Pro,monospace}.plan-container .plan-query-text{background-color:#fff;font-family:Source Code Pro,monospace;text-align:left;margin-bottom:0}.plan-container .plan-query-text .code-key-item{background-color:#f8e400;font-weight:600;padding:1px}.plan ol,.plan ul{list-style:none}.twod .plan ol,.twod .plan ul{padding:0}.twod .plan ul.main-plan,.twod .plan ul.node-children{display:-webkit-box;display:-ms-flexbox;display:flex;margin-left:auto;margin-right:auto;padding-top:12px;margin-top:-5px;text-align:center}.classic .plan ul:first-child{padding-left:0}.classic .plan ul:first-child>li:after,.classic .plan ul:first-child>li:before{display:none}.plan ul.node-children{position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children:before{content:"";position:absolute;top:0;left:50%;border-left:2px solid #c4c4c4;height:12px;width:0}.plan ul.node-children>li{list-style-type:none;position:relative;-webkit-transition:all .5s;transition:all .5s}.twod .plan ul.node-children>li:not(:first-child){padding-left:10px}.twod .plan ul.node-children>li{padding-top:12px}.twod .plan ul.node-children>li:after,.twod .plan ul.node-children>li:before{content:"";position:absolute;top:0;right:50%;border-top:2px solid #c4c4c4;width:50%;height:12px}.twod .plan ul.node-children>li:after{right:auto;left:50%;border-left:2px solid #c4c4c4}.twod .plan ul.node-children>li:only-child{padding-top:0}.twod .plan ul.node-children>li:only-child:after,.twod .plan ul.node-children>li:only-child:before{display:none}.twod .plan ul.node-children>li:first-child:before,.twod .plan ul.node-children>li:last-child:after{border:0 none}.twod .plan ul.node-children>li:last-child:before{border-right:2px solid #c4c4c4;border-radius:0 6px 0 0}.twod .plan ul.node-children>li:first-child:after{border-radius:6px 0 0 0}.classic .plan ul.node-children>li:after,.classic .plan ul.node-children>li:before{content:"";position:absolute;left:-10px}.classic .plan ul.node-children>li:before{border-top:2px solid #c4c4c4;top:22px;width:11px;left:-10px}.classic .plan ul.node-children>li:after{border-left:2px solid #c4c4c4;height:calc(100% + 4px);width:6px;top:-5px}.classic .plan ul.node-children>li:last-child:after{height:29px;border-bottom:2px solid #c4c4c4;border-radius:0 0 0 6px}.classic .plan ul.node-children>li:last-child:before{left:-4px;width:5px}.plan ul.node-children>li .plan-node:hover+ul:before{border-color:#00b5e2}.plan ul.node-children>li .plan-node:hover+ul li:after,.plan ul.node-children>li .plan-node:hover+ul li:before,.plan ul.node-children>li .plan-node:hover+ul ul:before{border-color:#008caf}.plan ul.init-plans{padding-left:0;display:block}.twod .plan ul.init-plans{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.twod .plan ul.init-plans>li{margin-left:3px;margin-right:3px;margin-bottom:10px}.plan .subplan{border:1px solid #dedede;border-radius:3px;background-color:#fcfcfc;-webkit-box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);box-shadow:1px 1px 3px 0 rgba(0,0,0,.1);padding:0 10px 6px 10px}.plan .subplan>h4{font-size:12px;margin-top:.5rem;font-weight:600;font-style:italic}.classic .plan .subplan{margin-bottom:3px;display:inline-block}.twod .plan .subplan{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.plan .subplan.flash{-webkit-animation:flash 1s;animation:flash 1s}.plan .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan button .fa-chevron-right{display:inline-block}.plan button .fa-chevron-down{display:none}.plan button[aria-expanded=true] .fa-chevron-right{display:none!important}.plan button[aria-expanded=true] .fa-chevron-down{display:inline-block!important}.plan-stats{font-size:13px}.plan-stats .plan-triggers-container{border:1px solid #dedede;padding:18px;background-color:#fff;position:absolute;-webkit-box-shadow:0 0 10px 2px rgba(0,0,0,.3);box-shadow:0 0 10px 2px rgba(0,0,0,.3);border-radius:3px;margin-bottom:18px;z-index:6;right:0;width:300px}.plan-stats .plan-triggers-container .btn-close{border-radius:50%;-webkit-box-shadow:0;box-shadow:0;line-height:1.5;border:1px solid #dedede;background-color:#fff;font-size:12px}.plan-stats .plan-triggers-container h3{font-size:17px;width:93%;text-align:left;border-bottom:1px solid #dedede;padding-bottom:6px;margin-bottom:10px}.tippy-popper .text-muted{color:inherit!important}.splitpanes__pane{-webkit-transition:none!important;transition:none!important}.no-focus-outline:focus{outline:none}.plan-diagram{line-height:.85em;font-family:Noto Sans,sans-serif}.plan-diagram.plan-diagram-top{max-height:30%}.plan-diagram table tr td:nth-child(2){width:90%}.plan-diagram .legend ul li{font-size:13px}.plan-diagram .legend ul li span{display:inline-block;width:8px;height:8px;border-radius:50%}.plan-diagram table{cursor:pointer;border-collapse:collapse}.plan-diagram tbody{border-bottom:10px solid transparent}.plan-diagram td,.plan-diagram th{margin:0;color:#4d525a;white-space:nowrap}.plan-diagram td.node-type,.plan-diagram td.subplan,.plan-diagram th.node-type,.plan-diagram th.subplan{font-size:12px}.plan-diagram td.node-type,.plan-diagram th.node-type{text-transform:uppercase}.plan-diagram th{font-size:13px}.plan-diagram tr{border:solid transparent;border-width:0 2px}.plan-diagram tr.highlight{background-color:#ffb;border-left-color:#00b5e2;border-right-color:#00b5e2}.plan-diagram .tree-lines{font-family:Source Code Pro,monospace}',""]),t.exports=e},c605:function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column vh-100",attrs:{id:"app"}},[n("div",{staticClass:"navbar container"},[n("router-link",{staticClass:"btn btn-secondary ml-auto",attrs:{tag:"a",to:"/"}},[t._v(" New Plan ")]),n("router-link",{staticClass:"btn btn-link",attrs:{tag:"a",to:"about"}},[t._v(" About ")])],1),n("router-view")],1)},r=[],s=n("9ab4"),i=n("60a3");function l(t){return l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h(t,e)}var v=["",""],_=function(t){function e(){return c(this,e),u(this,d(e).apply(this,arguments))}return f(e,t),e}(i["c"]);_=Object(s["a"])([i["a"]],_);var m=_,b=m,g=n("2877"),E=Object(g["a"])(b,o,r,!1,null,null,null),T=E.exports,S=n("8c4f"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col d-flex"},[t._m(1),n("div",{staticClass:"dropdown ml-auto"},[n("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Sample Plans ")]),n("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},t._l(t.samples,(function(e,a){return n("a",{staticClass:"dropdown-item",attrs:{href:""},on:{click:function(n){return n.preventDefault(),t.loadSample(e)}}},[t._v(" "+t._s(e[0])+" ")])})),0)])])]),n("form",{on:{submit:function(e){return e.preventDefault(),t.submitPlan(e)}}},[n("div",{staticClass:"form-group"},[t._m(2),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.planInput,expression:"planInput"}],class:["form-control",t.draggingPlan?"dropzone-over":""],attrs:{id:"planInput",rows:"8",placeholder:"Paste execution plan\\nOr drop a file"},domProps:{value:t.planInput},on:{dragenter:function(e){t.draggingPlan=!0},dragleave:function(e){t.draggingPlan=!1},drop:function(e){return e.preventDefault(),t.handleDrop(e)},input:function(e){e.target.composing||(t.planInput=e.target.value)}}})]),n("div",{staticClass:"form-group"},[t._m(3),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.queryInput,expression:"queryInput"}],class:["form-control",t.draggingQuery?"dropzone-over":""],attrs:{id:"queryInput",rows:"8",placeholder:"Paste corresponding SQL query\\nOr drop a file"},domProps:{value:t.queryInput},on:{dragenter:function(e){t.draggingQuery=!0},dragleave:function(e){t.draggingQuery=!1},drop:function(e){return e.preventDefault(),t.handleDrop(e)},input:function(e){e.target.composing||(t.queryInput=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])])},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert alert-warning"},[t._v(" This is the demo application for "),n("a",{attrs:{href:"https://github.com/dalibo/pev2"}},[t._v("PEV2")]),t._v(". It is serverless and doesn't store your plans. "),n("br"),t._v(" Please consider using "),n("a",{attrs:{href:"https://explain.dalibo.com"}},[t._v("explain.dalibo.com")]),t._v(" instead if you want to save or share your plans. ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-muted"},[t._v(" For best results, use "),n("code",[t._v("EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON)")]),n("br"),n("em",[t._v("psql")]),t._v(" users can export the plan to a file using "),n("code",[t._v("psql -qAt -f explain.sql > analyze.json")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"planInput"}},[t._v("Plan "),n("span",{staticClass:"small text-muted"},[t._v("(text or JSON)")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"queryInput"}},[t._v("Query "),n("span",{staticClass:"small text-muted"},[t._v("(optional)")])])}],w=n("bc3a"),y=n.n(w);function x(t){return x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function I(t,e,n){return e&&A(t.prototype,e),n&&A(t,n),t}function R(t,e){return!e||"object"!==x(e)&&"function"!==typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function N(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}function D(t,e){return D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},D(t,e)}var M=function(t){function e(){var t;return L(this,e),t=R(this,k(e).apply(this,arguments)),t.samples=[["Example 1 (JSON)","plan_1.json","plan_1.sql"],["Example 1 (plain text)","plan_1.txt","plan_1.sql"],["Example 2","plan_2.json","plan_2.sql"],["Example 3","plan_3.json","plan_3.sql"],["Example 4","plan_4.json"],["Example 5","plan_5.json","plan_5.sql"],["With subplan","plan_6.txt"],["With CTE","plan_7.txt"],["Very large plan","plan_8.json"],["With trigger","plan_trigger.json","plan_trigger.sql"],["With trigger (plain text)","plan_trigger.txt","plan_trigger_2.sql"],["Parallel (verbose)","plan_parallel.json"],["Parallel (4 workers)","plan_parallel2.txt","plan_parallel2.sql"]],t.planInput="",t.queryInput="",t.draggingPlan=!1,t.draggingQuery=!1,t}return N(e,t),I(e,[{key:"mounted",value:function(){var t=document.getElementsByTagName("textarea");Array.prototype.forEach.call(t,(function(t){t.placeholder=t.placeholder.replace(/\\n/g,"\n")}))}},{key:"submitPlan",value:function(){v[0]=this.planInput,v[1]=this.queryInput,fn.push({path:"plan"})}},{key:"loadSample",value:function(t){var e=this;y.a.get("samples/"+t[1]).then((function(t){e.planInput=t.request.responseText})),t[2]?y.a.get("samples/"+t[2]).then((function(t){e.queryInput=t.request.responseText})):this.queryInput=""}},{key:"handleDrop",value:function(t){var e=t.srcElement;if(e instanceof HTMLTextAreaElement&&(this.draggingPlan=!1,this.draggingQuery=!1,t.dataTransfer)){var n=t.dataTransfer.files[0],a=new FileReader;a.onload=function(t){a.result instanceof ArrayBuffer||(e.value=a.result||"",e.dispatchEvent(new Event("input")))},a.readAsText(n)}}}]),e}(i["c"]);M=Object(s["a"])([i["a"]],M);var B=M,U=B,j=(n("0624"),Object(g["a"])(U,C,O,!1,null,null,null)),W=j.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.planSource?n("plan",{attrs:{"plan-source":t.planSource,"plan-query":t.planQuery}}):t._e()},K=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["plan-container d-flex flex-column overflow-hidden flex-grow-1 bg-light",t.viewOptions.viewMode,t.viewOptions.orientation]},[t.plan?n("div",{staticClass:"plan-stats d-flex border-bottom border-top form-inline"},[n("div",{staticClass:"d-inline-block px-2"},[t._v(" Execution time: "),t.plan.planStats.executionTime?[n("span",{staticClass:"stat-value",domProps:{innerHTML:t._s(t.$options.filters.duration(t.plan.planStats.executionTime))}})]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("missing execution time")}})])]],2),n("div",{staticClass:"d-inline-block border-left px-2"},[t._v(" Planning time: "),t.plan.planStats.planningTime?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+t.planningTimeClass(t.plan.planStats.planningTime/t.plan.planStats.executionTime*100),domProps:{innerHTML:t._s(t.$options.filters.duration(t.plan.planStats.planningTime))}})])]:[n("span",{staticClass:"text-muted"},[t._v(" N/A "),n("i",{staticClass:"fa fa-info-circle cursor-help",attrs:{title:t.getHelpMessage("missing planning time")}})])]],2),t.plan.planStats.jitTime?n("div",{staticClass:"d-inline-block border-left px-2"},[t._v(" JIT: "),n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+t.planningTimeClass(t.plan.planStats.jitTime/t.plan.planStats.executionTime*100),domProps:{innerHTML:t._s(t.$options.filters.duration(t.plan.planStats.jitTime))}})])]):t._e(),n("div",{staticClass:"d-inline-block border-left px-2 position-relative"},[n("span",{staticClass:"stat-label"},[t._v("Triggers: ")]),t.plan.planStats.triggers.length?[n("span",{staticClass:"stat-value"},[n("span",{class:"mb-0 p-0 px-1 alert "+t.durationClass(t.totalTriggerDurationPercent),domProps:{innerHTML:t._s(t.$options.filters.duration(t.triggersTotalDuration))}})]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(e){e.preventDefault(),t.showTriggers=!t.showTriggers}}},[n("i",{staticClass:"fa fa-caret-down text-muted"})]),t.showTriggers?n("div",{staticClass:"plan-triggers-container text-left"},[n("button",{staticClass:"btn btn-close float-right",on:{click:function(e){t.showTriggers=!1}}},[n("i",{staticClass:"fa fa-times"})]),n("h3",[t._v("Triggers")]),t._l(t.plan.planStats.triggers,(function(e,a){return n("div",[t._v(" "+t._s(e["Trigger Name"])+" "),n("br"),n("span",{staticClass:"text-muted"},[t._v("Called")]),t._v(" "+t._s(e["Calls"])),n("span",{staticClass:"text-muted"},[t._v("×")]),n("span",{staticClass:"float-right"},[n("span",{class:"p-0 px-1 alert "+t.durationClass(t.triggerDurationPercent(e)),domProps:{innerHTML:t._s(t.$options.filters.duration(e.Time))}}),t._v(" | "+t._s(t.triggerDurationPercent(e))),n("span",{staticClass:"text-muted"},[t._v("%")])]),n("br"),e.Relation?n("span",{staticClass:"text-muted"},[t._v("on")]):t._e(),t._v(" "+t._s(e.Relation)+" "),n("div",{staticClass:"clearfix"}),a!=t.plan.planStats.triggers.length-1?n("hr",{staticClass:"my-2"}):t._e()])}))],2):t._e()]:n("span",{staticClass:"text-muted"},[t._v(" N/A ")])],2),t.plan.planStats.settings?n("div",{staticClass:"d-inline-block border-left px-2 position-relative"},[n("span",{staticClass:"stat-label"},[t._v("Settings: "),n("span",{staticClass:"badge badge-secondary"},[t._v(t._s(t.lodash.keys(t.plan.planStats.settings).length))])]),n("button",{staticClass:"bg-transparent border-0 p-0 m-0 pl-1",on:{click:function(e){e.preventDefault(),t.showSettings=!t.showSettings}}},[n("i",{staticClass:"fa fa-caret-down text-muted"})]),t.showSettings?n("div",{staticClass:"plan-triggers-container text-left"},[n("button",{staticClass:"btn btn-close float-right",on:{click:function(e){t.showSettings=!1}}},[n("i",{staticClass:"fa fa-times"})]),n("h3",[t._v("Settings")]),n("em",{staticClass:"text-muted d-block pb-2"},[t._v(" Configuration parameters affecting query planning with value different from the built-in default value. ")]),n("table",{staticClass:"table table-sm table-striped mb-0"},[n("tbody",t._l(t.plan.planStats.settings,(function(e,a){return n("tr",[n("td",[t._v(t._s(a))]),n("td",[t._v(t._s(e))])])})),0)])]):t._e()]):t._e(),n("button",{class:["btn btn-sm ml-auto p-0 px-2",{"text-primary":t.showSource}],attrs:{title:"View source"},on:{click:t.showHideSource}},[n("i",{staticClass:"fa fa-code p-0"})]),n("button",{class:["border-left btn btn-sm p-0 px-2",{"text-primary":!t.viewOptions.menuHidden}],on:{click:t.showHideMenu}},[n("i",{staticClass:"fa fa-cog p-0"})])]):t._e(),!t.plan||t.viewOptions.menuHidden||t.showSource?t._e():n("div",{staticClass:"form-inline small border-bottom py-1"},[n("div",{staticClass:"btn-group btn-group-xs ml-auto mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.viewMode==t.viewModes.FULL},on:{click:function(e){t.viewOptions.viewMode=t.viewModes.FULL}}},[t._v("full")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.viewMode==t.viewModes.COMPACT},on:{click:function(e){t.viewOptions.viewMode=t.viewModes.COMPACT}}},[t._v("compact")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.viewMode==t.viewModes.DOT},on:{click:function(e){t.viewOptions.viewMode=t.viewModes.DOT}}},[t._v("dot")])]),n("div",{staticClass:"btn-group btn-group-xs mr-2"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.orientation==t.orientations.TWOD},on:{click:function(e){t.viewOptions.orientation=t.orientations.TWOD}}},[n("i",{staticClass:"fa fa-sitemap"}),t._v(" 2D ")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.orientation==t.orientations.CLASSIC},on:{click:function(e){t.viewOptions.orientation=t.orientations.CLASSIC}}},[n("i",{staticClass:"fa fa-list"}),t._v(" classic ")])]),n("div",{staticClass:"form-check mr-2 border-left pl-2"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.viewOptions.showDiagram,expression:"viewOptions.showDiagram"}],staticClass:"form-check-input",attrs:{id:"showDiagram",type:"checkbox"},domProps:{checked:Array.isArray(t.viewOptions.showDiagram)?t._i(t.viewOptions.showDiagram,null)>-1:t.viewOptions.showDiagram},on:{change:function(e){var n=t.viewOptions.showDiagram,a=e.target,o=!!a.checked;if(Array.isArray(n)){var r=null,s=t._i(n,r);a.checked?s<0&&t.$set(t.viewOptions,"showDiagram",n.concat([r])):s>-1&&t.$set(t.viewOptions,"showDiagram",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.viewOptions,"showDiagram",o)}}}),t._m(0)]),n("div",{staticClass:"form-group mr-2 pl-2 border-left"},[n("label",{staticClass:"mr-2 text-muted"},[t._v("Graph metric:")]),n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.NONE},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.NONE}}},[t._v("none")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.DURATION},attrs:{disabled:!t.rootNode[t.nodeProps.EXCLUSIVE_DURATION]},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.DURATION}}},[t._v("duration")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.ROWS},attrs:{disabled:void 0===t.rootNode[t.nodeProps.ACTUAL_ROWS]},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.ROWS}}},[t._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.highlightType===t.highlightTypes.COST},on:{click:function(e){t.viewOptions.highlightType=t.highlightTypes.COST}}},[t._v("cost")])])])]),t.validationMessage?n("div",{staticClass:"h-100 w-100 d-flex justify-content-center"},[n("div",{staticClass:"alert alert-danger align-self-center"},[t._v(t._s(t.validationMessage))])]):t.showSource?n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("div",{staticClass:"h-100 w-100 d-flex flex-column"},[n("ul",{staticClass:"nav nav-pills p-2"},[n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"plan"==t.sourceTabActive}],attrs:{href:""},on:{click:function(e){e.preventDefault(),t.sourceTabActive="plan"}}},[t._v("Plan")])]),n("li",{staticClass:"nav-item"},[n("a",{class:["nav-link py-1",{active:"query"==t.sourceTabActive}],attrs:{href:""},on:{click:function(e){e.preventDefault(),t.sourceTabActive="query"}}},[t._v("Query")])])]),n("div",{staticClass:"flex-grow-1 flex-shrink-1 bg-dark overflow-auto tab-content px-2"},[n("div",{class:["tab-pane fade show",{active:"plan"==t.sourceTabActive}]},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[t._v(t._s(t.planSource))])])]),n("div",{class:["tab-pane fade show",{active:"query"==t.sourceTabActive}]},[t.planQuery?n("div",{staticClass:"bg-dark"},[n("pre",{staticClass:"small p-2 text-white mb-0"},[n("code",[t._v(t._s(t.planQuery))])])]):n("div",{staticClass:"text-white p-2"},[t._v(" No query provided for this plan ")])])])])]):n("div",{staticClass:"overflow-hidden flex-grow-1 flex-shrink-1 d-flex"},[n("splitpanes",{staticClass:"default-theme",on:{resize:function(e){t.viewOptions.diagramWidth=e[0].size}}},[t.viewOptions.showDiagram?n("pane",{ref:"diagram",staticClass:"plan-diagram overflow-auto h-100",attrs:{size:t.viewOptions.diagramWidth}},[n("diagram",{attrs:{plan:t.plan,eventBus:t.eventBus}})],1):t._e(),n("pane",{ref:"plan",staticClass:"overflow-auto flex-grow-1 flex-shrink-1 p-1",on:{mousedown:function(e){t.menuHidden=!0}}},[n("div",{staticClass:"plan h-100 w-100 d-flex flex-column grab-bing"},[n("ul",{staticClass:"main-plan"},[n("li",[n("plan-node",{ref:"root",attrs:{node:t.rootNode,plan:t.plan,viewOptions:t.viewOptions,eventBus:t.eventBus}})],1)]),n("ul",{staticClass:"init-plans"},t._l(t.plan.ctes,(function(e){return n("li",[n("plan-node",{ref:"root",refInFor:!0,attrs:{node:e,plan:t.plan,viewOptions:t.viewOptions,eventBus:t.eventBus}})],1)})),0)])])],1)],1)])},X=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"form-check-label",attrs:{for:"showDiagram"}},[n("i",{staticClass:"fa fa-align-left"}),t._v(" Diagram")])}],$=n("2ef0"),F=n("512e"),Y=(n("c1ea"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{subplan:t.node[t.nodeProps.SUBPLAN_NAME],"d-flex flex-column align-items-center":t.viewOptions.orientation==t.orientations.TWOD}},[t.node[t.nodeProps.SUBPLAN_NAME]?n("h4",[t._v(t._s(t.node[t.nodeProps.SUBPLAN_NAME]))]):t._e(),n("div",{class:["text-left plan-node",{detailed:t.showDetails,"never-executed":t.isNeverExecuted,parallel:t.workersCount}]},[t.workersCount?n("div",{staticClass:"workers text-muted py-0 px-1"},t._l(t.workersCountReversed,(function(t){return n("div",{style:"top: "+(1+2*t)+"px; left: "+(1+3*(t+1))+"px;"})})),0):t._e(),t.hasChildren?n("div",{staticClass:"collapse-handle"},[n("i",{class:["fa fa-fw",{"fa-compress":!t.collapsed,"fa-expand":t.collapsed}],attrs:{title:"Collpase or expand child nodes"},on:{click:function(e){return e.stopPropagation(),t.toggleCollapsed()}}})]):t._e(),n("div",{staticClass:"plan-node-body card",on:{mouseover:function(e){return t.eventBus.$emit("mouseovernode",t.node)},mouseout:function(e){return t.eventBus.$emit("mouseoutnode",t.node)}}},[n("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"card-body header no-focus-outline",attrs:{content:(t.showDetails?"Hide":"View")+" node details"},on:{click:function(e){e.stopPropagation(),t.showDetails=!t.showDetails}}},[n("header",{staticClass:"mb-0"},[n("h4",[t._v(" "+t._s(t.getNodeName())+" ")]),n("div",{staticClass:"float-right"},[t.durationClass?n("span",{class:"p-0  d-inline-block mb-0 ml-1 text-nowrap alert "+t.durationClass,attrs:{title:"Slow"}},[n("i",{staticClass:"fa fa-fw fa-clock"})]):t._e(),t.costClass?n("span",{class:"p-0  d-inline-block mb-0 ml-1 text-nowrap alert "+t.costClass,attrs:{title:"Cost is high"}},[n("i",{staticClass:"fa fa-fw fa-dollar-sign"})]):t._e(),t.estimationClass?n("span",{class:"p-0  d-inline-block mb-0 ml-1 text-nowrap alert "+t.estimationClass,attrs:{title:"Bad estimation for number of rows"}},[n("i",{staticClass:"fa fa-fw fa-thumbs-down"})]):t._e(),t.rowsRemovedClass?n("span",{class:"p-0  d-inline-block mb-0 ml-1 text-nowrap alert "+t.rowsRemovedClass,attrs:{title:"High number of rows removed"}},[n("i",{staticClass:"fa fa-fw fa-filter"})]):t._e()]),t.viewOptions.viewMode===t.viewModes.FULL?n("span",[t.isNeverExecuted?n("span",{staticClass:"node-duration text-warning"},[t._v(" Never executed ")]):t._e()]):t._e()]),t.viewOptions.viewMode===t.viewModes.FULL?n("div",{staticClass:"font-italic text-left"},[t.node[t.nodeProps.RELATION_NAME]?n("div",[n("span",{staticClass:"text-muted"},[t._v("on ")]),t.node[t.nodeProps.SCHEMA]?n("span",[t._v(t._s(t.node[t.nodeProps.SCHEMA])+".")]):t._e(),t._v(t._s(t.node[t.nodeProps.RELATION_NAME])+" "),t.node[t.nodeProps.ALIAS]?n("span",[t._v(" ("+t._s(t.node[t.nodeProps.ALIAS])+")")]):t._e()]):t._e(),t.node[t.nodeProps.GROUP_KEY]?n("div",[n("span",{staticClass:"text-muted"},[t._v("by")]),t._v(" "+t._s(t._f("truncate")(t._f("keysToString")(t.node[t.nodeProps.GROUP_KEY]),250,"…")))]):t._e(),t.node[t.nodeProps.SORT_KEY]?n("div",[n("span",{staticClass:"text-muted"},[t._v("by")]),t._v(" "+t._s(t._f("truncate")(t._f("keysToString")(t.node[t.nodeProps.SORT_KEY]),250,"…")))]):t._e(),t.node[t.nodeProps.JOIN_TYPE]?n("div",[t._v(t._s(t._f("truncate")(t._f("keysToString")(t.node[t.nodeProps.JOIN_TYPE]),250,"…"))+" "),n("span",{staticClass:"text-muted"},[t._v("join")])]):t._e(),t.node[t.nodeProps.INDEX_NAME]?n("div",[n("span",{staticClass:"text-muted"},[t._v(" using")]),t._v(" "+t._s(t._f("keysToString")(t.node[t.nodeProps.INDEX_NAME])))]):t._e(),t.node[t.nodeProps.HASH_CONDITION]?n("div",[n("span",{staticClass:"text-muted"},[t._v(" on")]),t._v(" "+t._s(t._f("keysToString")(t.node[t.nodeProps.HASH_CONDITION])))]):t._e(),t.node[t.nodeProps.CTE_NAME]?n("div",[n("a",{staticClass:"text-reset",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.eventBus.$emit("clickcte","CTE "+t.node[t.nodeProps.CTE_NAME])}}},[n("i",{staticClass:"fa fa-link text-muted"}),t._v(" "),n("span",{staticClass:"text-muted"},[t._v("CTE")]),t._v(" "+t._s(t.node[t.nodeProps.CTE_NAME])+" ")])]):t._e()]):t._e(),t.allWorkersLaunched||t.viewOptions.viewMode!==t.viewModes.FULL?t._e():n("div",{staticClass:"text-c-3 cursor-help",attrs:{title:t.getHelpMessage("workers planned not launched")}},[n("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(" "),n("span",[t._v("Not all workers launched")])]),n("div",{staticClass:"clearfix"}),t.viewOptions.highlightType!==t.highlightTypes.NONE&&null!==t.highlightValue?n("div",[n("div",{staticClass:"progress node-bar-container",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar",style:{width:t.barWidth+"%","background-color":t.getBarColor(t.barWidth)},attrs:{role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"}})]),t.shouldShowNodeBarLabel()?n("span",{staticClass:"node-bar-label"},[n("span",{staticClass:"text-muted"},[t._v(t._s(t.viewOptions.highlightType)+":")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.highlightValue)}})]):t._e()]):t._e()]),t.showDetails?n("div",{staticClass:"card-header border-top"},[t.getNodeTypeDescription()?n("div",{staticClass:"node-description"},[n("span",{staticClass:"node-type"},[t._v(t._s(t.node[t.nodeProps.NODE_TYPE])+" Node")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.getNodeTypeDescription())}})]):t._e(),n("ul",{staticClass:"nav nav-tabs card-header-tabs"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"general"===t.activeTab},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.setActiveTab("general")}}},[t._v("General")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link text-nowrap",class:{active:"iobuffer"===t.activeTab},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.setActiveTab("iobuffer")}}},[t._v("IO & Buffers")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"output"===t.activeTab,disabled:!t.node[t.nodeProps.OUTPUT]},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.setActiveTab("output")}}},[t._v("Output")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"workers"===t.activeTab,disabled:!t.workersCount},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.setActiveTab("workers")}}},[t._v("Workers")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"misc"===t.activeTab},attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.setActiveTab("misc")}}},[t._v("Misc")])])])]):t._e(),t.showDetails?n("div",{staticClass:"card-body tab-content"},[n("div",{staticClass:"tab-pane",class:{"show active":"general"===t.activeTab}},[t.node[t.nodeProps.EXCLUSIVE_DURATION]?n("div",[n("i",{staticClass:"fa fa-fw fa-clock text-muted"}),n("b",[t._v("Timing:")]),t._v(" "),n("span",{class:"p-0 px-1 rounded alert "+t.durationClass,domProps:{innerHTML:t._s(t.formattedProp("EXCLUSIVE_DURATION"))}}),t.executionTimePercent!==1/0?[t._v(" | "),n("strong",[t._v(t._s(t.executionTimePercent))]),n("span",{staticClass:"text-muted"},[t._v("%")])]:t._e()],2):t._e(),n("div",[n("i",{staticClass:"fa fa-fw fa-align-justify text-muted"}),n("b",[t._v("Rows:")]),t._v(" "),n("span",{staticClass:"px-1"},[t._v(t._s(t.formattedProp("ACTUAL_ROWS")))]),t._v(" "),t.node[t.nodeProps.PLAN_ROWS]?n("span",{staticClass:"text-muted"},[t._v("(Planned: "+t._s(t.formattedProp("PLAN_ROWS"))+")")]):t._e(),t.plannerRowEstimateDirection!==t.estimateDirections.none&&t.shouldShowPlannerEstimate?n("span",[t._v(" | "),t.plannerRowEstimateDirection===t.estimateDirections.over?n("span",[n("i",{staticClass:"fa fa-arrow-up"}),t._v(" over")]):t._e(),t.plannerRowEstimateDirection===t.estimateDirections.under?n("span",[n("i",{staticClass:"fa fa-arrow-down"}),t._v(" under")]):t._e(),t._v(" estimated "),t.plannerRowEstimateValue!=1/0?n("span",[t._v(" by "),n("span",{class:"p-0 px-1 alert "+t.estimationClass,domProps:{innerHTML:t._s(t.formattedProp("PLANNER_ESTIMATE_FACTOR"))}})]):t._e()]):t._e()]),t.rowsRemoved?n("div",[n("i",{staticClass:"fa fa-fw fa-filter text-muted"}),n("b",[t._v(" "+t._s(t.nodeProps[t.rowsRemovedProp])+": ")]),n("span",[n("span",{staticClass:"px-1"},[t._v(t._s(t.formattedProp(t.rowsRemovedProp)))]),t._v("| "),n("span",{class:"p-0 px-1 alert "+t.rowsRemovedClass},[t._v(t._s(100==t.rowsRemovedPercent?">99":t.rowsRemovedPercent)+"%")])])]):t._e(),t.node[t.nodeProps.EXCLUSIVE_COST]?n("div",[n("i",{staticClass:"fa fa-fw fa-dollar-sign text-muted"}),n("b",[t._v("Cost:")]),t._v(" "),n("span",{class:"p-0 px-1 mr-1 alert "+t.costClass},[t._v(t._s(t.formattedProp("EXCLUSIVE_COST")))]),t._v(" "),n("span",{staticClass:"text-muted"},[t._v("(Total: "+t._s(t.formattedProp("TOTAL_COST"))+")")])]):t._e(),t.node[t.nodeProps.ACTUAL_LOOPS]>1?n("div",[n("i",{staticClass:"fa fa-fw fa-undo text-muted"}),n("b",[t._v("Loops:")]),t._v(" "),n("span",{staticClass:"px-1"},[t._v(t._s(t.formattedProp("ACTUAL_LOOPS"))+" ")])]):t._e()]),n("div",{staticClass:"tab-pane",class:{"show active":"iobuffer"===t.activeTab}},[t.node[t.nodeProps.EXCLUSIVE_IO_READ_TIME]||t.node[t.nodeProps.EXCLUSIVE_IO_WRITE_TIME]?n("div",{staticClass:"mb-2"},[n("b",[t._v(" I/O Timings: ")]),t.node[t.nodeProps.EXCLUSIVE_IO_READ_TIME]?n("span",{staticClass:"ml-2"},[n("b",[t._v("Read: ")]),t._v(" "+t._s(t.formattedProp("EXCLUSIVE_IO_READ_TIME"))+" ")]):t._e(),t.node[t.nodeProps.EXCLUSIVE_IO_WRITE_TIME]?n("span",{staticClass:"ml-2"},[n("b",[t._v("Write: ")]),t._v(" "+t._s(t.formattedProp("EXCLUSIVE_IO_WRITE_TIME"))+" ")]):t._e()]):t._e(),n("b",[t._v(" Blocks: ")]),n("table",{staticClass:"table table-sm"},[t._m(0),n("tr",[n("th",[t._v("Shared")]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_SHARED_HIT_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_SHARED_READ_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_SHARED_DIRTIED_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_SHARED_WRITTEN_BLOCKS")||"-"))])]),n("tr",[n("th",[t._v("Temp")]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_TEMP_HIT_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_TEMP_READ_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_TEMP_DIRTIED_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_TEMP_WRITTEN_BLOCKS")||"-"))])]),n("tr",[n("th",[t._v("Local")]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_LOCAL_HIT_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_LOCAL_READ_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_LOCAL_DIRTIED_BLOCKS")||"-"))]),n("td",{staticClass:"text-right"},[t._v(t._s(t.formattedProp("EXCLUSIVE_LOCAL_WRITTEN_BLOCKS")||"-"))])])])]),n("div",{staticClass:"tab-pane",class:{"show active":"output"===t.activeTab}},[t._v(" "+t._s(t.formattedProp("OUTPUT"))+" ")]),t.workersCount?n("div",{staticClass:"tab-pane",class:{"show active":"workers"===t.activeTab}},[t.lodash.isNumber(t.workersCount)&&!t.lodash.isNaN(t.workersCount)&&t.viewOptions.viewMode===t.viewModes.FULL?n("div",[n("b",[t._v("Workers: ")]),t._v(" "),n("span",{staticClass:"px-1"},[t._v(t._s(t.workersCount))])]):t._e(),t.lodash.isArray(t.node[t.nodeProps.WORKERS])?n("div",{staticClass:"accordion"},[t._l(t.node[t.nodeProps.WORKERS],(function(e,a){return[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header p-0"},[n("button",{staticClass:"btn btn-link btn-sm text-secondary",staticStyle:{"font-size":"inherit"},attrs:{type:"button","data-toggle":"collapse","data-target":"#collapse-"+t._uid+"-"+a}},[n("i",{staticClass:"fa fa-chevron-right fa-fw"}),n("i",{staticClass:"fa fa-chevron-down fa-fw"}),t._v(" Worker "+t._s(e[t.workerProps.WORKER_NUMBER])+" ")])]),n("div",{staticClass:"collapse",attrs:{id:"collapse-"+t._uid+"-"+a}},[n("div",{staticClass:"card-body p-0"},[n("table",{staticClass:"table table-sm prop-list mb-0"},t._l(e,(function(e,a){return t.shouldShowProp(a,e)?n("tr",[n("td",{attrs:{width:"40%"}},[t._v(t._s(a))]),n("td",{domProps:{innerHTML:t._s(t.$options.filters.formatNodeProp(a,e,!0))}})]):t._e()})),0)])])])]}))],2):n("div",{staticClass:"font-italic"},[n("strong",[t._v("Workers")]),t._v(": Detailed information not available. Consider using "),n("code",[t._v("EXPLAIN VERBOSE")]),t._v(". ")])]):t._e(),n("div",{staticClass:"tab-pane",class:{"show active":"misc"===t.activeTab}},[n("table",{staticClass:"table table-sm prop-list"},t._l(t.props,(function(e){return t.shouldShowProp(e.key,e.value)?n("tr",[n("td",{attrs:{width:"40%"}},[t._v(t._s(e.key))]),n("td",{domProps:{innerHTML:t._s(t.$options.filters.formatNodeProp(e.key,e.value,!0))}})]):t._e()})),0),t._m(1)])]):t._e()])]),t.plans?n("ul",{class:["node-children",{collapsed:t.collapsed}]},t._l(t.plans,(function(e){return n("li",[n("plan-node",{attrs:{node:e,plan:t.plan,viewOptions:t.viewOptions,eventBus:t.eventBus}})],1)})),0):t._e()])}),q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td"),n("th",{staticClass:"text-right",attrs:{width:"25%"}},[t._v("Hit")]),n("th",{staticClass:"text-right",attrs:{width:"25%"}},[t._v("Read")]),n("th",{staticClass:"text-right",attrs:{width:"25%"}},[t._v("Dirtied")]),n("th",{staticClass:"text-right",attrs:{width:"25%"}},[t._v("Written")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-muted text-right"},[n("em",[t._v("* Calculated value")])])}];function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function G(t,e,n){return e&&z(t.prototype,e),n&&z(t,n),t}var Q=function(){function t(){J(this,t)}return G(t,[{key:"getNodeTypeDescription",value:function(t){return Z[t.toUpperCase()]}},{key:"getHelpMessage",value:function(t){return tt[t.toUpperCase()]}}]),t}(),Z={LIMIT:"returns a specified number of rows from a record set.",SORT:"sorts a record set based on the specified sort key.","NESTED LOOP":"merges two record sets by looping through every record in the first set and\n   trying to find a match in the second set. All matching records are returned.","MERGE JOIN":"merges two record sets by first sorting them on a <strong>join key</strong>.",HASH:"generates a hash table from the records in the input recordset. Hash is used by\n   <strong>Hash Join</strong>.","HASH JOIN":"joins two record sets by hashing one of them (using a <strong>Hash Scan</strong>).",AGGREGATE:"groups records together based on a GROUP BY or aggregate function (like <code>sum()</code>).",HASHAGGREGATE:"groups records together based on a GROUP BY or aggregate function (like sum()). Hash Aggregate uses\n   a hash to first organize the records by a key.","SEQ SCAN":"finds relevant records by sequentially scanning the input record set. When reading from a table,\n   Seq Scans (unlike Index Scans) perform a single read operation (only the table is read).","INDEX SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Scans perform 2 read operations: one to\n    read the index and another to read the actual value from the table.","INDEX ONLY SCAN":"finds relevant records based on an <strong>Index</strong>.\n    Index Only Scans perform a single read operation\n    from the index and do not read from the corresponding table.","BITMAP HEAP SCAN":"searches through the pages returned by the <strong>Bitmap Index Scan</strong>\n    for relevant rows.","BITMAP INDEX SCAN":"uses a <strong>Bitmap Index</strong> (index which uses 1 bit per page)\n    to find all relevant pages.\n    Results of this node are fed to the <strong>Bitmap Heap Scan</strong>.","CTE SCAN":"performs a sequential scan of <strong>Common Table Expression (CTE) query</strong> results. Note that\n    results of a CTE are materialized (calculated and temporarily stored)."},tt={"MISSING EXECUTION TIME":"Execution time (or Total runtime) not available for this plan. Make sure you\n    use EXPLAIN ANALYZE.","MISSING PLANNING TIME":"Planning time not available for this plan.","WORKERS PLANNED NOT LAUNCHED":"Less workers than planned were launched.\nConsider modifying max_parallel_workers or max_parallel_workers_per_gather."};function et(t,e,n,a){var o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=t.scrollLeft,i=r.left>=o.left&&r.left<=o.right&&r.right<=o.right,l=t.scrollTop,c=r.top>=o.top&&r.top<=o.bottom&&r.bottom<=o.bottom;!n&&i&&c?a():(s=r.left+t.scrollLeft-o.left-o.width/2+r.width/2,l=r.top+t.scrollTop-o.top-20,ot({element:t,to:{scrollTop:l,scrollLeft:s},duration:400,done:a}))}var nt,at=function(t){var e=t.currentTime,n=t.start,a=t.change,o=t.duration,r=e;return r/=o/2,r<1?a/2*r*r+n:(r-=1,-a/2*(r*(r-2)-1)+n)};function ot(t){var e=t.duration,n=t.element,a=t.to,o=t.done,r=n.scrollTop,s=n.scrollLeft,i=a.scrollTop-r,l=a.scrollLeft-s,c=(new Date).getTime(),u=function t(){var u=(new Date).getTime(),p=u-c;n.scrollTop=at({currentTime:p,start:r,change:i,duration:e}),n.scrollLeft=at({currentTime:p,start:s,change:l,duration:e}),p<e?requestAnimationFrame(t):(n.scrollTop=a.scrollTop,n.scrollLeft=a.scrollLeft,o&&o())};u()}function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function it(t,e,n){return e&&st(t.prototype,e),n&&st(t,n),t}(function(t){t[t["scrollTop"]=0]="scrollTop",t[t["scrollLeft"]=1]="scrollLeft"})(nt||(nt={})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var lt,ct,ut,pt,dt=function(){function t(){rt(this,t)}return it(t,[{key:"hslToRgb",value:function(t,e,n){var a,o,r;if(0===e)a=o=r=n;else{var s=n<.5?n*(1+e):n+e-n*e,i=2*n-s;a=this.hue2rgb(i,s,t+1/3),o=this.hue2rgb(i,s,t),r=this.hue2rgb(i,s,t-1/3)}return[Math.floor(255*a),Math.floor(255*o),Math.floor(255*r)]}},{key:"numberToColorHsl",value:function(t){var e=1.2*(100-t)/360,n=this.hslToRgb(e,.9,.4);return"rgb("+n[0]+","+n[1]+","+n[2]+")"}},{key:"durationPercentToClass",value:function(t){return t>90?4:t>40?3:t>10?2:1}},{key:"hue2rgb",value:function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}}]),t}(),ft=n("c1df"),ht=n.n(ft),vt=n("4623"),_t=n.n(vt);function mt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(t){t[t["time"]=0]="time",t[t["rows"]=1]="rows",t[t["cost"]=2]="cost",t[t["buffers"]=3]="buffers",t[t["estimate_factor"]=4]="estimate_factor"})(lt||(lt={})),function(t){t[t["shared"]=0]="shared",t[t["temp"]=1]="temp",t[t["local"]=2]="local"}(ct||(ct={})),function(t){t["shared"]="Shared",t["temp"]="Temp",t["local"]="Local"}(ut||(ut={})),function(t){t["hit"]="Hit",t["read"]="Read",t["written"]="Written",t["dirtied"]="Dirtied"}(pt||(pt={}));var bt,gt=function t(){mt(this,t)};gt.NONE="none",gt.DURATION="duration",gt.ROWS="rows",gt.COST="cost",function(t){t[t["over"]=1]="over",t[t["under"]=2]="under",t[t["none"]=3]="none"}(bt||(bt={}));var Et=function t(){mt(this,t)};Et.FULL="full",Et.COMPACT="compact",Et.DOT="dot";var Tt,St,Ct,Ot,wt=function t(){mt(this,t)};wt.TWOD="twod",wt.CLASSIC="classic",function(t){t[t["center"]=0]="center",t[t["visible"]=1]="visible",t[t["none"]=2]="none"}(Tt||(Tt={})),function(t){t[t["flash"]=0]="flash",t[t["highlight"]=1]="highlight"}(St||(St={})),function(t){t["NODE_TYPE"]="Node Type",t["ACTUAL_ROWS"]="Actual Rows",t["PLAN_ROWS"]="Plan Rows",t["ROWS_REMOVED_BY_FILTER"]="Rows Removed by Filter",t["ROWS_REMOVED_BY_JOIN_FILTER"]="Rows Removed by Join Filter",t["ACTUAL_STARTUP_TIME"]="Actual Startup Time",t["ACTUAL_TOTAL_TIME"]="Actual Total Time",t["ACTUAL_LOOPS"]="Actual Loops",t["STARTUP_COST"]="Startup Cost",t["TOTAL_COST"]="Total Cost",t["PLANS"]="Plans",t["RELATION_NAME"]="Relation Name",t["SCHEMA"]="Schema",t["ALIAS"]="Alias",t["GROUP_KEY"]="Group Key",t["SORT_KEY"]="Sort Key",t["SORT_METHOD"]="Sort Method",t["SORT_SPACE_TYPE"]="Sort Space Type",t["SORT_SPACE_USED"]="Sort Space Used",t["JOIN_TYPE"]="Join Type",t["INDEX_NAME"]="Index Name",t["HASH_CONDITION"]="Hash Cond",t["PARENT_RELATIONSHIP"]="Parent Relationship",t["SUBPLAN_NAME"]="Subplan Name",t["PARALLEL_AWARE"]="Parallel Aware",t["WORKERS"]="Workers",t["WORKERS_PLANNED"]="Workers Planned",t["WORKERS_LAUNCHED"]="Workers Launched",t["SHARED_HIT_BLOCKS"]="Shared Hit Blocks",t["SHARED_READ_BLOCKS"]="Shared Read Blocks",t["SHARED_DIRTIED_BLOCKS"]="Shared Dirtied Blocks",t["SHARED_WRITTEN_BLOCKS"]="Shared Written Blocks",t["TEMP_HIT_BLOCKS"]="Temp Hit Blocks",t["TEMP_READ_BLOCKS"]="Temp Read Blocks",t["TEMP_DIRTIED_BLOCKS"]="Temp Dirtied Blocks",t["TEMP_WRITTEN_BLOCKS"]="Temp Written Blocks",t["LOCAL_HIT_BLOCKS"]="Local Hit Blocks",t["LOCAL_READ_BLOCKS"]="Local Read Blocks",t["LOCAL_DIRTIED_BLOCKS"]="Local Dirtied Blocks",t["LOCAL_WRITTEN_BLOCKS"]="Local Written Blocks",t["IO_READ_TIME"]="I/O Read Time",t["IO_WRITE_TIME"]="I/O Write Time",t["OUTPUT"]="Output",t["EXCLUSIVE_DURATION"]="*Duration (exclusive)",t["EXCLUSIVE_COST"]="*Cost (exclusive)",t["PLANNER_ESTIMATE_FACTOR"]="*Planner Row Estimate Factor",t["PLANNER_ESTIMATE_DIRECTION"]="*Planner Row Estimate Direction",t["EXCLUSIVE_SHARED_HIT_BLOCKS"]="*Shared Hit Blocks (exclusive)",t["EXCLUSIVE_SHARED_READ_BLOCKS"]="*Shared Read Blocks (exclusive)",t["EXCLUSIVE_SHARED_DIRTIED_BLOCKS"]="*Shared Dirtied Blocks (exclusive)",t["EXCLUSIVE_SHARED_WRITTEN_BLOCKS"]="*Shared Written Blocks (exclusive)",t["EXCLUSIVE_TEMP_HIT_BLOCKS"]="*Temp Hit Blocks (exclusive)",t["EXCLUSIVE_TEMP_READ_BLOCKS"]="*Temp Read Blocks (exclusive)",t["EXCLUSIVE_TEMP_DIRTIED_BLOCKS"]="*Temp Dirtied Blocks (exclusive)",t["EXCLUSIVE_TEMP_WRITTEN_BLOCKS"]="*Temp Written Blocks (exclusive)",t["EXCLUSIVE_LOCAL_HIT_BLOCKS"]="*Local Hit Blocks (exclusive)",t["EXCLUSIVE_LOCAL_READ_BLOCKS"]="*Local Read Blocks (exclusive)",t["EXCLUSIVE_LOCAL_DIRTIED_BLOCKS"]="*Local Dirtied Blocks (exclusive)",t["EXCLUSIVE_LOCAL_WRITTEN_BLOCKS"]="*Local Written Blocks (exclusive)",t["EXCLUSIVE_IO_READ_TIME"]="*I/O Read Time (exclusive)",t["EXCLUSIVE_IO_WRITE_TIME"]="*I/O Write Time (exclusive)",t["CTE_SCAN"]="CTE Scan",t["CTE_NAME"]="CTE Name",t["FUNCTION_NAME"]="Function Name",t["ARRAY_INDEX_KEY"]="arrayIndex",t["PEV_PLAN_TAG"]="plan_"}(Ct||(Ct={})),function(t){t[t["duration"]=0]="duration",t[t["boolean"]=1]="boolean",t[t["rows"]=2]="rows",t[t["cost"]=3]="cost",t[t["factor"]=4]="factor",t[t["estimateDirection"]=5]="estimateDirection",t[t["json"]=6]="json",t[t["space"]=7]="space",t[t["increment"]=8]="increment"}(Ot||(Ot={}));var yt={};yt[Ct.ACTUAL_ROWS]=Ot.rows,yt[Ct.PLAN_ROWS]=Ot.rows,yt[Ct.ACTUAL_TOTAL_TIME]=Ot.duration,yt[Ct.ACTUAL_STARTUP_TIME]=Ot.duration,yt[Ct.STARTUP_COST]=Ot.cost,yt[Ct.TOTAL_COST]=Ot.cost,yt[Ct.PARALLEL_AWARE]=Ot.boolean,yt[Ct.WORKERS]=Ot.json,yt[Ct.SORT_SPACE_USED]=Ot.space,yt[Ct.ROWS_REMOVED_BY_FILTER]=Ot.rows,yt[Ct.ROWS_REMOVED_BY_JOIN_FILTER]=Ot.rows,yt[Ct.EXCLUSIVE_DURATION]=Ot.duration,yt[Ct.EXCLUSIVE_COST]=Ot.cost,yt[Ct.PLANNER_ESTIMATE_FACTOR]=Ot.factor,yt[Ct.PLANNER_ESTIMATE_DIRECTION]=Ot.estimateDirection,yt[Ct.IO_READ_TIME]=Ot.duration,yt[Ct.IO_WRITE_TIME]=Ot.duration,yt[Ct.EXCLUSIVE_IO_READ_TIME]=Ot.duration,yt[Ct.EXCLUSIVE_IO_WRITE_TIME]=Ot.duration;var xt=function t(){mt(this,t)};function Lt(t,e){if(e=!!e,t<1&&!e)return"<1 ms";if(t<1e3)return parseFloat(t.toPrecision(3)).toLocaleString()+"ms";var n=e?{}:{largest:2};return ft["duration"](t).format("w[w] d[d] h[h] m[m] s[s] SSS[ms]",n)}function At(t){return t=parseFloat(t.toPrecision(3)),t.toLocaleString()}function It(t){return t.toLocaleString()}function Rt(t){var e=parseFloat(t.toPrecision(2)).toLocaleString(),n=$["template"]('${f}&nbsp;<span class="text-muted">&times;</span>');return n({f:e})}function Pt(t){return t instanceof Array||(t=[t]),t=$["map"](t,(function(t){return t.replace(/(^\(|\)$)/g,"")})),t.join(", ")}function kt(t,e,n){return n=n||"...",t.length>e?t.slice(0,e)+n:t}function Nt(t){return Dt(1024*t)}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=1024,a=e<0?0:e,o=["Bytes","kB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(t)/Math.log(n)),s=$["template"]('${value}&nbsp;<span class="text-muted">${unit}</span>'),i=parseFloat((t/Math.pow(n,r)).toFixed(a)).toLocaleString();return s({value:i,unit:o[r]})}function Mt(t,e,n){if($["has"](yt,t)){if(yt[t]===Ot.duration)return Lt(e,n);if(yt[t]===Ot.boolean)return e?"yes":"no";if(yt[t]===Ot.cost)return At(e);if(yt[t]===Ot.rows)return It(e);if(yt[t]===Ot.factor)return Rt(e);if(yt[t]===Ot.estimateDirection)switch(e){case bt.over:return'<i class="fa fa-arrow-up"></i> over';case bt.under:return'<i class="fa fa-arrow-down"></i> under';default:return"-"}else{if(yt[t]===Ot.json)return JSON.stringify(e,null,2);if(yt[t]===Ot.space)return Nt(e)}}return e}function Bt(t){var e;return e=t>90?4:t>40?3:t>10?2:1,e?"c-"+e:""}function Ut(t){return Ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function jt(t){return Kt(t)||Vt(t)||Wt()}function Wt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Vt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Kt(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function Ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function $t(t,e,n){return e&&Xt(t.prototype,e),n&&Xt(t,n),t}function Ft(t,e){return!e||"object"!==Ut(e)&&"function"!==typeof e?Yt(t):e}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}function Jt(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zt(t,e)}function zt(t,e){return zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},zt(t,e)}xt.WORKER_NUMBER="Worker Number",yt[xt.WORKER_NUMBER]=Ot.increment,_t()(ft);var Gt=function(t){function e(){var t;return Ht(this,e),t=Ft(this,qt(e).apply(this,arguments)),t.executionTimePercent=NaN,t.showDetails=!1,t.collapsed=!1,t.activeTab="general",t.costPercent=NaN,t.barWidth=0,t.props=[],t.plans=[],t.rowsRemoved=NaN,t.rowsRemovedPercent=NaN,t.estimateDirections=bt,t.highlightTypes=gt,t.viewModes=Et,t.orientations=wt,t.nodeProps=Ct,t.workerProps=xt,t.helpService=new Q,t.colorService=new dt,t.lodash=$,t.notMiscProperties=[Ct.NODE_TYPE,Ct.CTE_NAME,Ct.EXCLUSIVE_DURATION,Ct.EXCLUSIVE_COST,Ct.TOTAL_COST,Ct.PLAN_ROWS,Ct.ACTUAL_ROWS,Ct.ACTUAL_LOOPS,Ct.OUTPUT,Ct.WORKERS,Ct.WORKERS_PLANNED,Ct.WORKERS_LAUNCHED,Ct.EXCLUSIVE_SHARED_HIT_BLOCKS,Ct.EXCLUSIVE_SHARED_READ_BLOCKS,Ct.EXCLUSIVE_SHARED_DIRTIED_BLOCKS,Ct.EXCLUSIVE_SHARED_WRITTEN_BLOCKS,Ct.EXCLUSIVE_TEMP_HIT_BLOCKS,Ct.EXCLUSIVE_TEMP_READ_BLOCKS,Ct.EXCLUSIVE_TEMP_DIRTIED_BLOCKS,Ct.EXCLUSIVE_TEMP_WRITTEN_BLOCKS,Ct.EXCLUSIVE_LOCAL_HIT_BLOCKS,Ct.EXCLUSIVE_LOCAL_READ_BLOCKS,Ct.EXCLUSIVE_LOCAL_DIRTIED_BLOCKS,Ct.EXCLUSIVE_LOCAL_WRITTEN_BLOCKS,Ct.SHARED_HIT_BLOCKS,Ct.SHARED_READ_BLOCKS,Ct.SHARED_DIRTIED_BLOCKS,Ct.SHARED_WRITTEN_BLOCKS,Ct.TEMP_HIT_BLOCKS,Ct.TEMP_READ_BLOCKS,Ct.TEMP_DIRTIED_BLOCKS,Ct.TEMP_WRITTEN_BLOCKS,Ct.LOCAL_HIT_BLOCKS,Ct.LOCAL_READ_BLOCKS,Ct.LOCAL_DIRTIED_BLOCKS,Ct.LOCAL_WRITTEN_BLOCKS,Ct.PLANNER_ESTIMATE_FACTOR,Ct.PLANNER_ESTIMATE_DIRECTION,Ct.SUBPLAN_NAME,Ct.GROUP_KEY,Ct.HASH_CONDITION,Ct.JOIN_TYPE,Ct.INDEX_NAME,Ct.HASH_CONDITION,Ct.EXCLUSIVE_IO_READ_TIME,Ct.EXCLUSIVE_IO_WRITE_TIME,Ct.IO_READ_TIME,Ct.IO_WRITE_TIME],t}return Jt(e,t),$t(e,[{key:"created",value:function(){this.calculateProps(),this.calculateBar(),this.calculateDuration(),this.calculateCost(),this.calculateRowsRemoved(),this.plans=this.node[Ct.PLANS],this.plannerRowEstimateDirection=this.node[Ct.PLANNER_ESTIMATE_DIRECTION],this.plannerRowEstimateValue=this.node[Ct.PLANNER_ESTIMATE_FACTOR],this.plan.nodeComponents.push(this)}},{key:"destroyed",value:function(){var t=this;$["remove"](this.plan.nodeComponents,(function(e){return e===t}))}},{key:"calculateDuration",value:function(){var t=this.plan.planStats.executionTime||this.plan.content.Plan[Ct.ACTUAL_TOTAL_TIME];this.executionTimePercent=$["round"](this.node[Ct.EXCLUSIVE_DURATION]/t*100)}},{key:"calculateCost",value:function(){var t=this.plan.content.maxTotalCost;this.costPercent=$["round"](this.node[Ct.EXCLUSIVE_COST]/t*100)}},{key:"calculateRowsRemoved",value:function(){var t=this.rowsRemovedProp;if(t){var e=this.node[Ct[t]];this.rowsRemoved=e;var n=this.node[Ct.ACTUAL_ROWS];this.rowsRemovedPercent=$["floor"](e/(e+n)*100)}}},{key:"calculateProps",value:function(){this.props=$["chain"](this.node).omit(Ct.PLANS).omit(Ct.WORKERS).map((function(t,e){return{key:e,value:t}})).value()}},{key:"getNodeTypeDescription",value:function(){return this.helpService.getNodeTypeDescription(this.node[Ct.NODE_TYPE])}},{key:"getNodeName",value:function(){var t=this.isParallelAware?"Parallel ":"";return t+=this.node[Ct.NODE_TYPE],this.viewOptions.viewMode!==Et.DOT||this.showDetails?t.toUpperCase():t.replace(/[^A-Z]/g,"").toUpperCase()}},{key:"shouldShowNodeBarLabel",value:function(){return!!this.showDetails||!this.collapsed&&this.viewOptions.viewMode!==Et.DOT}},{key:"calculateBar",value:function(){var t;if(this.$options&&this.$options.filters)switch(this.viewOptions.highlightType){case gt.DURATION:if(t=this.node[Ct.EXCLUSIVE_DURATION],void 0===t){this.highlightValue=null;break}this.barWidth=Math.round(t/this.plan.planStats.maxDuration*100),this.highlightValue=this.$options.filters.duration(t);break;case gt.ROWS:if(t=this.node[Ct.ACTUAL_ROWS],void 0===t){this.highlightValue=null;break}this.barWidth=Math.round(t/this.plan.planStats.maxRows*100)||0,this.highlightValue=this.$options.filters.rows(t);break;case gt.COST:if(t=this.node[Ct.EXCLUSIVE_COST],void 0===t){this.highlightValue=null;break}this.barWidth=Math.round(t/this.plan.planStats.maxCost*100),this.highlightValue=this.$options.filters.cost(t);break}}},{key:"getBarColor",value:function(t){return this.colorService.numberToColorHsl(t)}},{key:"toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"getHelpMessage",value:function(t){return this.helpService.getHelpMessage(t)}},{key:"shouldShowProp",value:function(t,e){return(e||yt[t]===Ot.increment||t===Ct.ACTUAL_ROWS)&&-1===this.notMiscProperties.indexOf(t)}},{key:"setActiveTab",value:function(t){this.activeTab=t}},{key:"formattedProp",value:function(t){var e=Ct[t];return this.$options.filters.formatNodeProp(e,this.node[e],!0)}},{key:"rowsRemovedProp",get:function(){var t=Object.keys(this.node).find((function(t){return t===Ct.ROWS_REMOVED_BY_FILTER||t===Ct.ROWS_REMOVED_BY_JOIN_FILTER}));return Object.keys(Ct).find((function(e){return Ct[e]===t}))}},{key:"shouldShowPlannerEstimate",get:function(){return!(this.collapsed&&!this.showDetails||this.viewOptions.viewMode===Et.DOT)&&((this.estimationClass||this.showDetails)&&this.plannerRowEstimateDirection!==bt.none&&this.plannerRowEstimateValue)}},{key:"shouldShowCost",get:function(){return!(this.collapsed&&!this.showDetails||this.viewOptions.viewMode===Et.DOT)&&(this.node[Ct.EXCLUSIVE_COST]&&(this.costClass||this.showDetails))}},{key:"shouldShowRowsRemoved",get:function(){return!!this.rowsRemovedClass&&this.viewOptions.viewMode===Et.FULL&&!this.collapsed}},{key:"durationClass",get:function(){var t,e=this.executionTimePercent;return e>90?t=4:e>40?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"estimationClass",get:function(){var t,e=this.node[Ct.PLANNER_ESTIMATE_FACTOR];return e>1e3?t=4:e>100?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"costClass",get:function(){var t,e=this.costPercent;return e>90?t=4:e>40?t=3:e>10&&(t=2),!!t&&"c-"+t}},{key:"rowsRemovedClass",get:function(){var t,e=this.rowsRemovedPercent*this.executionTimePercent;return e>2e3?t=4:e>500&&(t=3),!!t&&"c-"+t}},{key:"hasChildren",get:function(){return!!this.plans}},{key:"workersCount",get:function(){return $["isArray"](this.node[Ct.WORKERS])?this.node[Ct.WORKERS].length:parseInt(this.node[Ct.WORKERS],0)}},{key:"workersCountReversed",get:function(){return jt(Array(this.workersCount).keys()).slice().reverse()}},{key:"isParallelAware",get:function(){return this.node[Ct.PARALLEL_AWARE]}},{key:"allWorkersLaunched",get:function(){return!this.node[Ct.WORKERS_LAUNCHED]||this.node[Ct.WORKERS_PLANNED]===this.node[Ct.WORKERS_LAUNCHED]}},{key:"isNeverExecuted",get:function(){return this.plan.planStats.executionTime&&!this.node[Ct.ACTUAL_LOOPS]}},{key:"hasSeveralLoops",get:function(){return this.node[Ct.ACTUAL_LOOPS]>1}},{key:"tilde",get:function(){return this.hasSeveralLoops?"~":""}}]),e}(i["c"]);Object(s["a"])([Object(i["b"])(Object)],Gt.prototype,"node",void 0),Object(s["a"])([Object(i["b"])(Object)],Gt.prototype,"plan",void 0),Object(s["a"])([Object(i["b"])(Object)],Gt.prototype,"viewOptions",void 0),Object(s["a"])([Object(i["b"])()],Gt.prototype,"eventBus",void 0),Object(s["a"])([Object(i["d"])("viewOptions.highlightType")],Gt.prototype,"calculateBar",null),Gt=Object(s["a"])([Object(i["a"])({name:"plan-node",filters:{cost:At,duration:Lt,factor:Rt,formatNodeProp:Mt,keysToString:Pt,truncate:kt,rows:It}})],Gt);var Qt=Gt,Zt=Qt,te=(n("51dc"),Object(g["a"])(Zt,Y,q,!1,null,null,null)),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.time},on:{click:function(e){t.viewOptions.metric=t.metrics.time}}},[t._v("time")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.rows},on:{click:function(e){t.viewOptions.metric=t.metrics.rows}}},[t._v("rows")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.estimate_factor},on:{click:function(e){t.viewOptions.metric=t.metrics.estimate_factor}}},[t._v("estimation")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.cost},on:{click:function(e){t.viewOptions.metric=t.metrics.cost}}},[t._v("cost")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.metric===t.metrics.buffers},on:{click:function(e){t.viewOptions.metric=t.metrics.buffers}}},[t._v("buffers")])])]),t.viewOptions.metric==t.metrics.buffers?n("div",{staticClass:"form-group text-center my-1"},[n("div",{staticClass:"btn-group btn-group-xs"},[n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.buffersMetric===t.buffersMetrics.shared},on:{click:function(e){t.viewOptions.buffersMetric=t.buffersMetrics.shared}}},[t._v("shared")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.buffersMetric===t.buffersMetrics.temp},on:{click:function(e){t.viewOptions.buffersMetric=t.buffersMetrics.temp}}},[t._v("temp")]),n("button",{staticClass:"btn btn-outline-secondary",class:{active:t.viewOptions.buffersMetric===t.buffersMetrics.local},on:{click:function(e){t.viewOptions.buffersMetric=t.buffersMetrics.local}}},[t._v("local")])])]):t._e(),n("div",{staticClass:"legend text-center"},[t.viewOptions.metric==t.metrics.buffers?n("ul",{staticClass:"list-unstyled list-inline mb-0"},[t._m(0),t._m(1),t._m(2),t._m(3)]):t._e()]),n("table",{staticClass:"my-1"},t._l(t.plans,(function(e,a){return n("tbody",[0===a&&t.plans.length>1?n("tr",[n("th",{staticClass:"subplan",attrs:{colspan:"2"}},[t._v(" Main Query Plan ")])]):t._e(),t._l(e,(function(e,a){return[e[1][t.nodeProps.SUBPLAN_NAME]?n("tr",[n("td",{staticClass:"subplan pr-2",class:{"font-weight-bold":t.lodash.startsWith(e[1][t.nodeProps.SUBPLAN_NAME],"CTE")},attrs:{colspan:"2"},on:{click:function(n){return n.preventDefault(),t.eventBus.$emit("clickcte",e[1][t.nodeProps.SUBPLAN_NAME])}}},[n("span",{staticClass:"tree-lines"},[t._l(t.lodash.range(e[0]),(function(n){return[-1!=t.lodash.indexOf(e[3],n)?[t._v("│")]:0!==n?[t._v("⠀")]:t._e()]})),0!==a?[t._v(t._s(e[2]?"└":"├"))]:t._e()],2),n("span",{staticClass:"font-italic"},[t._v(" "+t._s(e[1][t.nodeProps.SUBPLAN_NAME])+" ")])])]):t._e(),n("tr",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0,animation:"fade",delay:[200,0]},expression:"{arrow: true, animation: 'fade', delay: [200, 0]}"}],staticClass:"no-focus-outline",class:{highlight:e[1]===t.highlightedNode},attrs:{content:t.tooltip(e[1])},on:{click:function(n){return n.preventDefault(),t.eventBus.$emit("clicknode",e[1])},mouseover:function(n){return t.eventBus.$emit("mouseovernode",e[1])},mouseout:function(n){return t.eventBus.$emit("mouseoutnode",e[1])}}},[n("td",{staticClass:"node-type pr-2"},[n("span",{staticClass:"tree-lines"},[t._l(t.lodash.range(e[0]),(function(n){return[-1!=t.lodash.indexOf(e[3],n)?[t._v("│")]:0!==n?[t._v("⠀")]:t._e()]})),0!==a?[e[1][t.nodeProps.SUBPLAN_NAME]?[e[2]?[t._v("⠀")]:[t._v("│")]]:[t._v(t._s(e[2]?"└":"├"))]]:t._e()],2),t._v(" "+t._s(t.nodeType(e))+" ")]),n("td",[t.viewOptions.metric==t.metrics.time?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"progress-bar border-left bg-secondary",style:"width: "+e[1][t.nodeProps.EXCLUSIVE_DURATION]/(t.plan.planStats.executionTime||t.plan.content.Plan[t.nodeProps.ACTUAL_TOTAL_TIME])*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.rows?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.ACTUAL_ROWS]/t.plan.planStats.maxRows*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t._e(),t.viewOptions.metric==t.metrics.estimate_factor?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent justify-content-center",staticStyle:{height:"10px"}},[n("span",{staticClass:"text-muted small"},[n("i",{staticClass:"fa fa-fw",class:{"fa-arrow-down":e[1][t.nodeProps.PLANNER_ESTIMATE_DIRECTION]===t.estimateDirections.under}})]),n("div",{staticClass:"progress-bar",class:[e[1][t.nodeProps.PLANNER_ESTIMATE_DIRECTION]===t.estimateDirections.under?"bg-secondary":"bg-transparent"],style:"width: "+(e[1][t.nodeProps.PLANNER_ESTIMATE_FACTOR]||0)/t.maxEstimateFactor*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"progress-bar border-left",staticStyle:{width:"1px",height:"5px"},attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"progress-bar",class:[e[1][t.nodeProps.PLANNER_ESTIMATE_DIRECTION]===t.estimateDirections.over?"bg-secondary":"bg-transparent"],style:"width: "+(e[1][t.nodeProps.PLANNER_ESTIMATE_FACTOR]||0)/t.maxEstimateFactor*100+"%; height:5px;",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("span",{staticClass:"text-muted small"},[n("i",{staticClass:"fa fa-fw",class:{"fa-arrow-up":e[1][t.nodeProps.PLANNER_ESTIMATE_DIRECTION]===t.estimateDirections.over}})])]):t.viewOptions.metric==t.metrics.cost?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-secondary",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_COST]/t.plan.planStats.maxCost*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.buffers&&t.viewOptions.buffersMetric==t.buffersMetrics.shared&&t.plan.planStats.maxSharedBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_SHARED_HIT_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_SHARED_READ_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_SHARED_DIRTIED_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_SHARED_WRITTEN_BLOCKS]/t.plan.planStats.maxSharedBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.buffers&&t.viewOptions.buffersMetric==t.buffersMetrics.temp&&t.plan.planStats.maxTempBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_TEMP_HIT_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_TEMP_READ_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_TEMP_DIRTIED_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_TEMP_WRITTEN_BLOCKS]/t.plan.planStats.maxTempBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t.viewOptions.metric==t.metrics.buffers&&t.viewOptions.buffersMetric==t.buffersMetrics.local&&t.plan.planStats.maxLocalBlocks?n("div",{staticClass:"progress rounded-0 align-items-center bg-transparent",staticStyle:{height:"5px"}},[n("div",{staticClass:"bg-hit",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_LOCAL_HIT_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-read",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_LOCAL_READ_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-dirtied",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_LOCAL_DIRTIED_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}}),n("div",{staticClass:"bg-written",staticStyle:{height:"5px"},style:"width: "+Math.round(e[1][t.nodeProps.EXCLUSIVE_LOCAL_WRITTEN_BLOCKS]/t.plan.planStats.maxLocalBlocks*100)+"%",attrs:{role:"progressbar","aria-valuenow":"15","aria-valuemin":"0","aria-valuemax":"100"}})]):t._e()])])]}))],2)})),0)])},ae=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-hit rounded"}),t._v(" Hit ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-read"}),t._v(" Read ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-dirtied"}),t._v(" Dirtied ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"list-inline-item"},[n("span",{staticClass:"bg-written"}),t._v(" Written ")])}];function oe(t){return oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ie(t,e,n){return e&&se(t.prototype,e),n&&se(t,n),t}function le(t,e){return!e||"object"!==oe(e)&&"function"!==typeof e?ce(t):e}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ue(t)}function pe(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}function de(t,e){return de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},de(t,e)}var fe=function(t){function e(){var t;return re(this,e),t=le(this,ue(e).apply(this,arguments)),t.plans=[[]],t.lodash=$,t.nodeProps=Ct,t.metrics=lt,t.buffersMetrics=ct,t.estimateDirections=bt,t.centerModes=Tt,t.highlightModes=St,t.highlightedNode=null,t.viewOptions={metric:lt.time,buffersMetric:ct.shared},t}return pe(e,t),ie(e,[{key:"created",value:function(){var t=this,e=localStorage.getItem("diagramViewOptions");e&&$["assignIn"](this.viewOptions,JSON.parse(e)),this.flatten(this.plans[0],0,this.plan.content.Plan,!0,[]),$["each"](this.plan.ctes,(function(e){var n=[];t.flatten(n,0,e,!0,[]),t.plans.push(n)})),this.eventBus.$on("mouseovernode",(function(e){t.highlightedNode=e})),this.eventBus.$on("mouseoutnode",(function(){t.highlightedNode=null}))}},{key:"onViewOptionsChanged",value:function(t,e){localStorage.setItem("diagramViewOptions",JSON.stringify(this.viewOptions))}},{key:"tooltip",value:function(t){var e="";switch(this.viewOptions.metric){case lt.time:e+=this.timeTooltip(t);break;case lt.rows:e+=this.rowsTooltip(t);break;case lt.estimate_factor:e+=this.estimateFactorTooltip(t);break;case lt.cost:e+=this.costTooltip(t);break;case lt.buffers:e+=this.buffersTooltip(t);break}return t[Ct.CTE_NAME]&&(e+="<br><em>CTE "+t[Ct.CTE_NAME]+"</em>"),e}},{key:"timeTooltip",value:function(t){return["Duration: ",Lt(t[Ct.EXCLUSIVE_DURATION],!0)].join("")}},{key:"rowsTooltip",value:function(t){return["Rows: ",It(t[Ct.ACTUAL_ROWS])].join("")}},{key:"estimateFactorTooltip",value:function(t){var e=t[Ct.PLANNER_ESTIMATE_FACTOR],n=t[Ct.PLANNER_ESTIMATE_DIRECTION],a="";switch(n){case bt.over:a+='<i class="fa fa-arrow-up"></i> over';break;case bt.under:a+='<i class="fa fa-arrow-down"></i> under';break;default:a+="Correctly"}return a+=" estimated",a+=e?" by <b>"+Rt(e)+"</b>":"",a}},{key:"costTooltip",value:function(t){return["Cost: ",It(t[Ct.EXCLUSIVE_COST])].join("")}},{key:"buffersTooltip",value:function(t){var e,n,a,o,r="";switch(this.viewOptions.buffersMetric){case ct.shared:e=t[Ct.EXCLUSIVE_SHARED_HIT_BLOCKS],n=t[Ct.EXCLUSIVE_SHARED_READ_BLOCKS],o=t[Ct.EXCLUSIVE_SHARED_DIRTIED_BLOCKS],a=t[Ct.EXCLUSIVE_SHARED_WRITTEN_BLOCKS];break;case ct.temp:e=t[Ct.EXCLUSIVE_TEMP_HIT_BLOCKS],n=t[Ct.EXCLUSIVE_TEMP_READ_BLOCKS],o=t[Ct.EXCLUSIVE_TEMP_DIRTIED_BLOCKS],a=t[Ct.EXCLUSIVE_TEMP_WRITTEN_BLOCKS];break;case ct.local:e=t[Ct.EXCLUSIVE_LOCAL_HIT_BLOCKS],n=t[Ct.EXCLUSIVE_LOCAL_READ_BLOCKS],o=t[Ct.EXCLUSIVE_LOCAL_DIRTIED_BLOCKS],a=t[Ct.EXCLUSIVE_LOCAL_WRITTEN_BLOCKS];break}switch(r+=e?"<br>Hit: "+It(e):"",r+=n?"<br>Read: "+It(n):"",r+=o?"<br>Dirtied: "+It(o):"",r+=a?"<br>Written: "+It(a):"",r=r||" N/A",this.viewOptions.buffersMetric){case ct.shared:r="Shared Blocks:"+r;break;case ct.temp:r="Temp Blocks:"+r;break;case ct.local:r="Local Blocks:"+r;break}return r}},{key:"nodeType",value:function(t){return t[1][Ct.NODE_TYPE]}},{key:"flatten",value:function(t,e,n,a,o){var r=this;t.push([e,n,a,$["concat"]([],o)]),a||o.push(e),$["each"](n.Plans,(function(a){r.flatten(t,e+1,a,a===$["last"](n.Plans),o)})),a||o.pop()}},{key:"maxEstimateFactor",get:function(){var t=$["max"]($["map"](this.plans,(function(t){return $["max"]($["map"](t,(function(t){return t[1][Ct.PLANNER_ESTIMATE_FACTOR]})))})));return 2*t||1}}]),e}(i["c"]);Object(s["a"])([Object(i["b"])()],fe.prototype,"plan",void 0),Object(s["a"])([Object(i["b"])()],fe.prototype,"eventBus",void 0),Object(s["a"])([Object(i["d"])("viewOptions",{deep:!0})],fe.prototype,"onViewOptionsChanged",null),fe=Object(s["a"])([Object(i["a"])({filters:{durationClass:Bt}})],fe);var he=fe,ve=he,_e=Object(g["a"])(ve,ne,ae,!1,null,null,null),me=_e.exports;function be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ge=function t(e){be(this,t),this[Ct.NODE_TYPE]=e;var n=/^((?:Parallel\s+)?(?:Seq\sScan|Tid\sScan|Bitmap\s+Heap\s+Scan|Foreign\s+Scan|Update|Insert|Delete))\son\s(\S+)(?:\s+(\S+))?$/.exec(e),a=/^(Bitmap\s+Index\s+Scan)\son\s(\S+)$/.exec(e),o=/^((?:Parallel\s+)?Index(?:\sOnly)?\sScan(?:\sBackward)?)\susing\s(\S+)\son\s(\S+)(?:\s+(\S+))?$/.exec(e),r=/^(CTE\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(e),s=/^(Function\sScan)\son\s(\S+)(?:\s+(\S+))?$/.exec(e),i=/^(Subquery\sScan)\son\s(.+)$/.exec(e);n?(this[Ct.NODE_TYPE]=n[1],this[Ct.RELATION_NAME]=n[2],n[3]&&(this[Ct.ALIAS]=n[3])):a?(this[Ct.NODE_TYPE]=a[1],this[Ct.INDEX_NAME]=a[2]):o?(this[Ct.NODE_TYPE]=o[1],this[Ct.INDEX_NAME]=o[2],this[Ct.RELATION_NAME]=o[3],o[4]&&(this[Ct.ALIAS]=o[4])):r?(this[Ct.NODE_TYPE]=r[1],this[Ct.CTE_NAME]=r[2],r[3]&&(this[Ct.ALIAS]=r[3])):s?(this[Ct.NODE_TYPE]=s[1],this[Ct.FUNCTION_NAME]=s[2],s[3]&&(this[Ct.ALIAS]=s[3])):i&&(this[Ct.NODE_TYPE]=i[1]);var l=/^(Parallel\s+)(.*)/.exec(this[Ct.NODE_TYPE]);l&&(this[Ct.NODE_TYPE]=l[2],this[Ct.PARALLEL_AWARE]=!0);var c=/(.*)\sJoin$/.exec(this[Ct.NODE_TYPE]),u=/(.*)\s+(Full|Left|Right|Anti)/.exec(this[Ct.NODE_TYPE]);c&&(this[Ct.NODE_TYPE]=c[1],u&&(this[Ct.NODE_TYPE]=u[1],this[Ct.JOIN_TYPE]=u[2]),this[Ct.NODE_TYPE]+=" Join")};function Ee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Te=function t(e){Ee(this,t),this[xt.WORKER_NUMBER]=e},Se=n("3c66"),Ce=n.n(Se);function Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function we(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ye(t,e,n){return e&&we(t.prototype,e),n&&we(t,n),t}var xe=function(){function t(){Oe(this,t)}return ye(t,[{key:"createPlan",value:function(t,e,n){n=n.replace(/(\S)(?!$)(\s{2,})/gm,"$1 ");var a={id:Ct.PEV_PLAN_TAG+(new Date).getTime().toString(),name:t||"plan created on "+ht()().format("LLL"),createdOn:new Date,content:e,query:n,planStats:{},nodeComponents:[],ctes:[]};return this.analyzePlan(a),a}},{key:"analyzePlan",value:function(t){this.processNode(t.content.Plan,t),this.calculateMaximums(t.content)}},{key:"isCTE",value:function(t){return"InitPlan"===t[Ct.PARENT_RELATIONSHIP]&&$["startsWith"](t[Ct.SUBPLAN_NAME],"CTE")}},{key:"processNode",value:function(t,e){var n=this;this.calculatePlannerEstimate(t),$["each"](t[Ct.PLANS],(function(a){var o;a[Ct.WORKERS]||(t[Ct.WORKERS_PLANNED]&&(o=t[Ct.WORKERS_LAUNCHED]||t[Ct.WORKERS_PLANNED]),a[Ct.WORKERS]=o||t[Ct.WORKERS]);n.isCTE(a)&&e.ctes.push(a),n.processNode(a,e)})),$["remove"](t[Ct.PLANS],(function(t){return n.isCTE(t)})),this.calculateActuals(t),this.calculateExclusives(t)}},{key:"calculateMaximums",value:function(t){function e(t){return $["map"](t,(function(t){return[t,e(t[Ct.PLANS])]}))}var n=$["flattenDeep"](e([t.Plan])),a=$["maxBy"](n,Ct.ACTUAL_ROWS);a&&(t.maxRows=a[Ct.ACTUAL_ROWS]);var o=$["maxBy"](n,Ct.EXCLUSIVE_COST);o&&(t.maxCost=o[Ct.EXCLUSIVE_COST]);var r=$["maxBy"](n,Ct.TOTAL_COST);r&&(t.maxTotalCost=r[Ct.TOTAL_COST]);var s=$["maxBy"](n,Ct.EXCLUSIVE_DURATION);function i(t){return t[Ct.EXCLUSIVE_SHARED_HIT_BLOCKS]+t[Ct.EXCLUSIVE_SHARED_READ_BLOCKS]+t[Ct.EXCLUSIVE_SHARED_DIRTIED_BLOCKS]+t[Ct.EXCLUSIVE_SHARED_WRITTEN_BLOCKS]}s&&(t.maxDuration=s[Ct.EXCLUSIVE_DURATION]);var l=$["maxBy"](n,(function(t){return i(t)}));function c(t){return t[Ct.EXCLUSIVE_TEMP_HIT_BLOCKS]+t[Ct.EXCLUSIVE_TEMP_READ_BLOCKS]+t[Ct.EXCLUSIVE_TEMP_DIRTIED_BLOCKS]+t[Ct.EXCLUSIVE_TEMP_WRITTEN_BLOCKS]}l&&(t.maxSharedBlocks=i(l));var u=$["maxBy"](n,(function(t){return c(t)}));function p(t){return t[Ct.EXCLUSIVE_LOCAL_HIT_BLOCKS]+t[Ct.EXCLUSIVE_LOCAL_READ_BLOCKS]+t[Ct.EXCLUSIVE_LOCAL_DIRTIED_BLOCKS]+t[Ct.EXCLUSIVE_LOCAL_WRITTEN_BLOCKS]}u&&(t.maxTempBlocks=c(u));var d=$["maxBy"](n,(function(t){return p(t)}));d&&(t.maxLocalBlocks=p(d))}},{key:"calculateActuals",value:function(t){if(!$["isUndefined"](t[Ct.ACTUAL_TOTAL_TIME])){t[Ct.EXCLUSIVE_DURATION]=t[Ct.ACTUAL_TOTAL_TIME],t[Ct.WORKERS]||(t[Ct.EXCLUSIVE_DURATION]=t[Ct.EXCLUSIVE_DURATION]*t[Ct.ACTUAL_LOOPS]);var e=t[Ct.EXCLUSIVE_DURATION]-this.childrenDuration(t,0);t[Ct.EXCLUSIVE_DURATION]=e>0?e:0}t[Ct.TOTAL_COST]&&(t[Ct.EXCLUSIVE_COST]=t[Ct.TOTAL_COST]),$["each"](t[Ct.PLANS],(function(e){"InitPlan"!==e[Ct.PARENT_RELATIONSHIP]&&e[Ct.TOTAL_COST]&&(t[Ct.EXCLUSIVE_COST]=t[Ct.EXCLUSIVE_COST]-e[Ct.TOTAL_COST])})),t[Ct.EXCLUSIVE_COST]<0&&(t[Ct.EXCLUSIVE_COST]=0)}},{key:"childrenDuration",value:function(t,e){var n=this;return $["each"](t[Ct.PLANS],(function(t){"InitPlan"!==t[Ct.PARENT_RELATIONSHIP]&&(e+=t[Ct.EXCLUSIVE_DURATION]||0,e=n.childrenDuration(t,e))})),e}},{key:"calculatePlannerEstimate",value:function(t){t[Ct.ACTUAL_ROWS]&&(t[Ct.PLANNER_ESTIMATE_FACTOR]=t[Ct.ACTUAL_ROWS]/t[Ct.PLAN_ROWS],t[Ct.PLANNER_ESTIMATE_DIRECTION]=bt.none,t[Ct.PLANNER_ESTIMATE_FACTOR]>1&&(t[Ct.PLANNER_ESTIMATE_DIRECTION]=bt.under),t[Ct.PLANNER_ESTIMATE_FACTOR]<1&&(t[Ct.PLANNER_ESTIMATE_DIRECTION]=bt.over,t[Ct.PLANNER_ESTIMATE_FACTOR]=t[Ct.PLAN_ROWS]/t[Ct.ACTUAL_ROWS]))}},{key:"cleanupSource",value:function(t){return t=t.replace(/^(\||║|│)(.*)\1\r?\n/gm,"$2\n"),t=t.replace(/^\+-+\+\r?\n/gm,""),t=t.replace(/^(-|─|═)\1+\r?\n/gm,""),t=t.replace(/^(├|╟|╠|╞)(─|═)\2*(┤|╢|╣|╡)\r?\n/gm,""),t=t.replace(/^\+-+\+\r?\n/gm,""),t=t.replace(/^└(─)+┘\r?\n/gm,""),t=t.replace(/^╚(═)+╝\r?\n/gm,""),t=t.replace(/^┌(─)+┐\r?\n/gm,""),t=t.replace(/^╔(═)+╗\r?\n/gm,""),t=t.replace(/^(["'])(.*)\1\r?\n/gm,"$2\n"),t=t.replace(/\s*\+\r?\n/g,"\n"),t=t.replace(/↵\r?/gm,"\n"),t=t.replace(/^\s*QUERY PLAN\s*\r?\n/m,""),t=t.replace(/^\(\d+ rows?\)(\r?\n|$)/gm,"\n"),t}},{key:"fromSource",value:function(t){t=this.cleanupSource(t);var e=!1;try{e=JSON.parse(t)}catch(n){}return e?this.parseJson(t):/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)(\[|\{)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\n[\s\S]*?\1(\]|\})[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/gm.exec(t)?this.fromJson(t):this.fromText(t)}},{key:"fromJson",value:function(t){var e=t.split(/[\r\n]+/),n="",a=0;$["each"](e,(function(t,e){var o=/^(\s*)(\[|\{)\s*$/.exec(t);if(o)return n=o[1],a=e,!1}));var o=0;$["each"](e,(function(t,e){var a=new RegExp("^"+n+"(]|})s*$").exec(t);if(a)return o=e,!1}));var r=e.slice(a,o+1).join("\n");return this.parseJson(r)}},{key:"parseJson",value:function(t){var e=Ce.a.parser(),n=[],a=null,o=null;return e.onvalue=function(t){var e=n[n.length-1];if($["isArray"](e))e.push(t);else{var a=Object.keys(e),o=a[a.length-1];e[o]=t}},e.onopenobject=function(t){var e={};e[t]=null,n.push(e)},e.onkey=function(t){var e=n[n.length-1],a=Object.keys(e);-1!==a.indexOf(t)?o=[n.length-1,e[t]]:e[t]=null},e.onopenarray=function(){n.push([])},e.oncloseobject=e.onclosearray=function(){var t=n.pop();if(n.length){var e=n[n.length-1];if(o&&o[0]===n.length-1)$["merge"](o[1],t),o=null;else if($["isArray"](e))e.push(t);else{var r=Object.keys(e),s=r[r.length-1];e[s]=t}}else a=t},e.write(t).close(),a instanceof Array&&(a=a[0]),a}},{key:"fromText",value:function(t){var e=this,n=t.split(/\r?\n/),a={Plan:null},o=[];if($["each"](n,(function(t){t=t.replace(/"\s*$/,""),t=t.replace(/^\s*"/,""),t=t.replace(/\t/gm,"    ");var n=/^\s*/,r=t.match(n)[0].length;t=t.replace(n,"");var s="^s*$",i="^\\s*(QUERY|---|#).*$",l="^(\\s*->\\s*|\\s*)",c="([^\\r\\n\\t\\f\\v\\:\\(]*?)",u="\\(cost=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\s+rows=(\\d+)\\s+width=(\\d+)\\)",p="(?:",d=")",f="\\(",h="\\)",v="(?:actual\\stime=(\\d+\\.\\d+)\\.\\.(\\d+\\.\\d+)\\srows=(\\d+)\\sloops=(\\d+)|actual\\srows=(\\d+)\\sloops=(\\d+)|(never\\s+executed))",_="?",m=new RegExp(s).exec(t),b=new RegExp(i).exec(t),g=new RegExp(l+c+"\\s*"+p+(p+u)+"\\s+"+f+v+h+d+"|"+p+u+d+"|"+p+f+v+h+d+d+"\\s*$","gm"),E=g.exec(t),T=/^(\s*)((?:Sub|Init)Plan)\s*(?:\d+\s*)?\s*(?:\(returns.*\)\s*)?$/gm,S=T.exec(t),C=/^(\s*)CTE\s+(\S+)\s*$/g,O=C.exec(t),w=/^(\s*)Trigger\s+(.*):\s+time=(\d+\.\d+)\s+calls=(\d+)\s*$/g,y=w.exec(t),x=new RegExp(/^(\s*)Worker\s+(\d+):\s+/.source+p+v+d+_+"(.*)\\s*$","g"),L=x.exec(t),A=/^(\s*)JIT:\s*$/g,I=A.exec(t),R=/^(\s*)(\S.*\S)\s*$/g,P=R.exec(t);if(!m&&!b)if(!E||O||S){if(S){S[1];var k=S[2];$["remove"](o,(function(t){return t[0]>=r}));var N=$["last"](o)[1],D={node:N.node,subelementType:k.toLowerCase(),name:S[0]};o.push([r,D])}else if(O){O[1];var M=O[2];$["remove"](o,(function(t){return t[0]>=r}));var B=$["last"](o)[1],U={node:B.node,subelementType:"initplan",name:"CTE "+M};o.push([r,U])}else if(L){L[1];var j=parseInt(L[2],0),W=$["last"](o)[1];W.node[Ct.WORKERS]||(W.node[Ct.WORKERS]=[]);var V=e.getWorker(W.node,j);if(V||(V=new Te(j),W.node[Ct.WORKERS].push(V)),L[3]&&L[4]&&(V[Ct.ACTUAL_STARTUP_TIME]=parseFloat(L[3]),V[Ct.ACTUAL_TOTAL_TIME]=parseFloat(L[4]),V[Ct.ACTUAL_ROWS]=parseInt(L[5],0),V[Ct.ACTUAL_LOOPS]=parseInt(L[6],0)),e.parseSort(L[10],V))return;var K=L[10].split(/: (.+)/).filter((function(t){return t}));if(L[10]){if(!K[1])return;var H=$["startCase"](K[0]);V[H]=K[1]}}else if(y){y[1];$["remove"](o,(function(t){return t[0]>=r})),a.Triggers=a.Triggers||[],a.Triggers.push({"Trigger Name":y[2],Time:e.parseTime(y[3]),Calls:y[4]})}else if(I){a.JIT={};var X={node:a.JIT};o.push([1,X])}else if(P){P[1];var F,Y=P[2].split(/: (.+)/).filter((function(t){return t}));if(!Y[1])return;if($["remove"](o,(function(t){return t[0]>=r})),F=0===o.length?a:$["last"](o)[1].node,e.parseSort(P[2],F))return;if(e.parseBuffers(P[2],F))return;if(e.parseIOTimings(P[2],F))return;if(e.parseOptions(P[2],F))return;if(e.parseTiming(P[2],F))return;if(e.parseSettings(P[2],F))return;var q=Y[1].replace(/(\s*ms)$/,"");parseFloat(q)&&(q=parseFloat(q));var J=Y[0];-1===J.indexOf(" runtime")&&-1===J.indexOf(" time")||(J=$["startCase"](J)),F[J]=q}}else{E[1];var z=E[13],G=new ge(E[2]);(E[3]&&E[4]||E[14]&&E[15])&&(G[Ct.STARTUP_COST]=parseFloat(E[3]||E[14]),G[Ct.TOTAL_COST]=parseFloat(E[4]||E[15]),G[Ct.PLAN_ROWS]=parseInt(E[5]||E[16],0)),(E[7]&&E[8]||E[18]&&E[19])&&(G[Ct.ACTUAL_STARTUP_TIME]=parseFloat(E[7]||E[18]),G[Ct.ACTUAL_TOTAL_TIME]=parseFloat(E[8]||E[19])),(E[9]&&E[10]||E[11]&&E[12]||E[20]&&E[21])&&(G[Ct.ACTUAL_ROWS]=parseInt(E[9]||E[11]||E[20],0),G[Ct.ACTUAL_LOOPS]=parseInt(E[10]||E[12]||E[21],0)),z&&(G[Ct.ACTUAL_LOOPS]=0,G[Ct.ACTUAL_ROWS]=0,G[Ct.ACTUAL_TOTAL_TIME]=0);var Q={node:G,subelementType:"subnode"};if(0===o.length)return o.push([r,Q]),void(a.Plan=G);$["remove"](o,(function(t){return t[0]>=r}));var Z=$["last"](o)[1];o.push([r,Q]),Z.node[Ct.PLANS]||(Z.node[Ct.PLANS]=[]),"initplan"===Z.subelementType?(G[Ct.PARENT_RELATIONSHIP]="InitPlan",G[Ct.SUBPLAN_NAME]=Z.name):"subplan"===Z.subelementType&&(G[Ct.PARENT_RELATIONSHIP]="SubPlan",G[Ct.SUBPLAN_NAME]=Z.name),Z.node.Plans.push(G)}})),!a.Plan)throw new Error("Unable to parse plan");return a}},{key:"parseSort",value:function(t,e){var n=/^(\s*)Sort Method:\s+(.*)\s+(Memory|Disk):\s+(?:(\S*)kB)\s*$/g,a=n.exec(t);return!!a&&(e[Ct.SORT_METHOD]=a[2].trim(),e[Ct.SORT_SPACE_USED]=a[4],e[Ct.SORT_SPACE_TYPE]=a[3],!0)}},{key:"parseBuffers",value:function(t,e){var n=this,a=/Buffers:\s+(.*)\s*$/g,o=a.exec(t);return!!o&&($["each"](o[1].split(/,\s+/),(function(t){var a=/(shared|temp|local)\s+(.*)$/g,o=a.exec(t);if(o){var r=o[1];$["each"](["hit","read","written","dirtied"],(function(t){e[$["map"]([r,t,"blocks"],$["capitalize"]).join(" ")]=0})),$["each"](o[2].split(/\s+/),(function(t){n.parseBuffer(t,r,e)}))}})),!0)}},{key:"parseBuffer",value:function(t,e,n){var a=t.split(/=/),o=a[0],r=parseInt(a[1],0);n[$["map"]([e,o,"blocks"],$["capitalize"]).join(" ")]=r}},{key:"getWorker",value:function(t,e){return $["find"](t[Ct.WORKERS],(function(t){return t[xt.WORKER_NUMBER]===e}))}},{key:"parseIOTimings",value:function(t,e){var n=/I\/O Timings:\s+(.*)\s*$/g,a=n.exec(t);return!!a&&(e[Ct.IO_READ_TIME]=0,e[Ct.IO_WRITE_TIME]=0,$["each"](a[1].split(/\s+/),(function(t){var n=t.split(/=/),a=n[0],o=parseFloat(n[1]),r="IO_"+$["upperCase"](a)+"_TIME";e[Ct[r]]=o})),!0)}},{key:"parseOptions",value:function(t,e){var n=/^(\s*)Options:\s+(.*)$/g,a=n.exec(t);if(a){e.Options={};var o,r=a[2].split(/\s*,\s*/);return $["each"](r,(function(t){var n=/^(\S*)\s+(.*)$/g;o=n.exec(t),e.Options[o[1]]=JSON.parse(o[2])})),!0}return!1}},{key:"parseTiming",value:function(t,e){var n=this,a=/^(\s*)Timing:\s+(.*)$/g,o=a.exec(t);if(o){e.Timing={};var r,s=o[2].split(/\s*,\s*/);return $["each"](s,(function(t){var a=/^(\S*)\s+(.*)$/g;r=a.exec(t),e.Timing[r[1]]=n.parseTime(r[2])})),!0}return!1}},{key:"parseTime",value:function(t){return parseFloat(t.replace(/(\s*ms)$/,""))}},{key:"parseSettings",value:function(t,e){var n=/^(\s*)Settings:\s*(.*)$/g,a=n.exec(t);if(a){e.Settings={};var o,r=a[2].split(/\s*,\s*/);return $["each"](r,(function(t){var n=/^(\S*)\s+=\s+(.*)$/g;o=n.exec(t),e.Settings[o[1]]=o[2].replace(/'/g,"")})),!0}return!1}},{key:"calculateExclusives",value:function(t){var e=["SHARED_HIT_BLOCKS","SHARED_READ_BLOCKS","SHARED_DIRTIED_BLOCKS","SHARED_WRITTEN_BLOCKS","TEMP_HIT_BLOCKS","TEMP_READ_BLOCKS","TEMP_DIRTIED_BLOCKS","TEMP_WRITTEN_BLOCKS","LOCAL_HIT_BLOCKS","LOCAL_READ_BLOCKS","LOCAL_DIRTIED_BLOCKS","LOCAL_WRITTEN_BLOCKS","IO_READ_TIME","IO_WRITE_TIME"];$["each"](e,(function(e){var n=$["sumBy"](t[Ct.PLANS],(function(t){return t[Ct[e]]})),a="EXCLUSIVE_"+e;t[Ct[a]]=t[Ct[e]]-n}))}}]),t}();function Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ae(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Ie(t,e,n){return e&&Ae(t.prototype,e),n&&Ae(t,n),t}var Re=function(){function t(e){var n=this;Le(this,t),this.element=e,this.listener=!0,this.start=!1,this.startMousePositionX=0,this.startMousePositionY=0,this.startScrollPositionX=0,this.startScrollPositionY=0,this.element.addEventListener("mousedown",(function(t){t.target.closest(".plan-node-body")||(t.preventDefault(),n.clearSelection(),n.startMousePositionX=t.screenX,n.startMousePositionY=t.screenY,n.startScrollPositionX=n.element.scrollLeft,n.startScrollPositionY=n.element.scrollTop,n.start=!0)})),document.documentElement.addEventListener("mouseup",(function(t){t.preventDefault(),n.startMousePositionX=0,n.startMousePositionY=0,n.startScrollPositionX=0,n.startScrollPositionY=0,n.start=!1})),this.element.addEventListener("mousemove",(function(t){n.listener&&n.start&&(t.preventDefault(),n.element.scrollTo(n.startScrollPositionX+(n.startMousePositionX-t.screenX),n.startScrollPositionY+(n.startMousePositionY-t.screenY)))}))}return Ie(t,[{key:"clearSelection",value:function(){if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges()}}}]),t}(),Pe=n("6018");function ke(t){return ke="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Me(t,e,n){return e&&De(t.prototype,e),n&&De(t,n),t}function Be(t,e){return!e||"object"!==ke(e)&&"function"!==typeof e?Ue(t):e}function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}function We(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}function Ve(t,e){return Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ve(t,e)}i["c"].use(Pe["b"]),i["c"].component("tippy",Pe["a"]);var Ke=function(t){function e(){var t;return Ne(this,e),t=Be(this,je(e).apply(this,arguments)),t.flat=[],t.menuHidden=!0,t.validationMessage="",t.showTriggers=!1,t.showSettings=!1,t.showSource=!1,t.sourceTabActive="plan",t.helpService=new Q,t.lodash=$,t.eventBus=new i["c"],t.viewOptions={menuHidden:!0,showHighlightBar:!1,showPlanStats:!0,highlightType:gt.NONE,viewMode:Et.FULL,orientation:wt.TWOD,showDiagram:!0,diagramWidth:20},t.highlightTypes=gt,t.viewModes=Et,t.orientations=wt,t.planService=new xe,t.nodeProps=Ct,t}return We(e,t),Me(e,[{key:"mounted",value:function(){this.handleScroll(),this.eventBus.$on("mouseovernode",this.onMouseOverNode),this.eventBus.$on("mouseoutnode",this.onMouseOutNode),this.eventBus.$on("clicknode",this.centerNode),this.eventBus.$on("clickcte",this.centerCTE)}},{key:"handleScroll",value:function(){var t=this.$refs.plan.$el;new Re(t)}},{key:"created",value:function(){var t,e=this,n=localStorage.getItem("viewOptions");n&&$["assignIn"](this.viewOptions,JSON.parse(n));try{t=this.planService.fromSource(this.planSource),this.validationMessage=""}catch(o){return this.validationMessage="Couldn't parse plan",void(this.plan=null)}this.rootNode=t.Plan,this.plan=this.planService.createPlan("",t,this.planQuery);var a=this.plan.content;this.plan.planStats={executionTime:a["Execution Time"]||a["Total Runtime"]||null,planningTime:a["Planning Time"]||null,maxRows:a.maxRows||null,maxCost:a.maxCost||null,maxDuration:a.maxDuration||null,maxSharedBlocks:a.maxSharedBlocks||null,maxTempBlocks:a.maxTempBlocks||0,triggers:a.Triggers||[],jitTime:a.JIT&&a.JIT.Timing&&a.JIT.Timing.Total||null,settings:a.Settings},i["c"].nextTick((function(){e.centerNode(e.rootNode,Tt.visible,St.flash),e.plan}))}},{key:"onViewOptionsChanged",value:function(t,e){localStorage.setItem("viewOptions",JSON.stringify(this.viewOptions))}},{key:"onShowSource",value:function(t){t||i["c"].nextTick(this.handleScroll)}},{key:"showHideMenu",value:function(){this.viewOptions.menuHidden=!this.viewOptions.menuHidden}},{key:"showHideSource",value:function(){this.showSource=!this.showSource}},{key:"getHelpMessage",value:function(t){return this.helpService.getHelpMessage(t)}},{key:"showSlowestNode",value:function(){this.centerNode(this.plan.content.slowest,Tt.center,St.flash)}},{key:"showCostliestNode",value:function(){this.centerNode(this.plan.content.costliest,Tt.center,St.flash)}},{key:"centerNode",value:function(t,e,n){var a=$["find"](this.plan.nodeComponents,(function(e){return e.node===t}));a&&this.highlightEl(a.$el.querySelector(".plan-node"),e,n)}},{key:"highlightEl",value:function(t,e,n){if(t){var a=this.$refs.plan.$el;e!==Tt.none&&et(a,t,e===Tt.center,(function(){n===St.flash&&(t.classList.add("flash"),setTimeout((function(){t.classList.remove("flash")}),1e3))}))}}},{key:"highlightNode",value:function(t,e){var n=$["find"](this.plan.nodeComponents,(function(e){return e.node===t}));if(n){var a=n.$el.querySelector(".plan-node");a.classList.toggle("highlight",e)}}},{key:"centerCTE",value:function(t){var e=$["find"](this.plan.nodeComponents,(function(e){return e.node[Ct.SUBPLAN_NAME]===t}));e&&this.highlightEl(e.$el,Tt.visible,St.flash)}},{key:"triggerDurationPercent",value:function(t){this.plan,this.plan&&this.plan.planStats;var e=this.plan&&this.plan.planStats.executionTime||0,n=t.Time;return $["round"](n/e*100)}},{key:"toggleDiagram",value:function(){this.viewOptions.showDiagram=!this.viewOptions.showDiagram}},{key:"timelineTooltip",value:function(t){return this.plan?["Duration: ",Lt(t.node[Ct.EXCLUSIVE_DURATION],!0)," | ",t.executionTimePercent,"%"].join(""):""}},{key:"durationClass",value:function(t){var e;return e=t>90?4:t>40?3:t>10?2:1,!!e&&"c-"+e}},{key:"planningTimeClass",value:function(t){var e;return t>90?e=4:t>40?e=3:t>10&&(e=2),!!e&&"c-"+e}},{key:"onMouseOverNode",value:function(t){this.highlightNode(t,!0)}},{key:"onMouseOutNode",value:function(t){this.highlightNode(t,!1)}},{key:"totalTriggerDurationPercent",get:function(){this.plan,this.plan&&this.plan.planStats;var t=this.plan&&this.plan.planStats.executionTime||0,e=this.triggersTotalDuration||0;return $["round"](e/t*100)}},{key:"triggersTotalDuration",get:function(){if(this.plan)return $["sumBy"](this.plan.planStats.triggers,(function(t){return t.Time}))}}]),e}(i["c"]);Object(s["a"])([Object(i["b"])(String)],Ke.prototype,"planSource",void 0),Object(s["a"])([Object(i["b"])(String)],Ke.prototype,"planQuery",void 0),Object(s["a"])([Object(i["d"])("viewOptions",{deep:!0})],Ke.prototype,"onViewOptionsChanged",null),Object(s["a"])([Object(i["d"])("showSource")],Ke.prototype,"onShowSource",null),Ke=Object(s["a"])([Object(i["a"])({name:"plan",components:{PlanNode:ee,Diagram:me,Splitpanes:F["Splitpanes"],Pane:F["Pane"]},directives:{},filters:{cost:At,duration:Lt,durationClass:Bt,rows:It}})],Ke);var He=Ke,Xe=He,$e=(n("44bc"),Object(g["a"])(Xe,H,X,!1,null,null,null)),Fe=$e.exports;function Ye(t){return Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Je(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ze(t,e,n){return e&&Je(t.prototype,e),n&&Je(t,n),t}function Ge(t,e){return!e||"object"!==Ye(e)&&"function"!==typeof e?Qe(t):e}function Qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ze(t)}function tn(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&en(t,e)}function en(t,e){return en=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},en(t,e)}var nn=function(t){function e(){var t;return qe(this,e),t=Ge(this,Ze(e).apply(this,arguments)),t.planSource=v[0],t.planQuery=v[1],t}return tn(e,t),ze(e,[{key:"beforeMount",value:function(){this.planSource||fn.push({name:"home"})}}]),e}(i["c"]);nn=Object(s["a"])([Object(i["a"])({components:{Plan:Fe}})],nn);var an=nn,on=an,rn=Object(g["a"])(on,V,K,!1,null,null,null),sn=rn.exports,ln=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},cn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",[t._v(" Disclaimer ")]),n("p",[t._v(" This project is a rewrite of the excellent "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev"}},[t._v("Postgres Explain Visualizer (pev)")]),t._v(". Kudos go to Alex Tatiyants. ")]),n("p",[t._v(" The pev project was initialy written in early 2016 but seem to be abandonned since then. There was no activity at all for more than "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev/issues/42"}},[t._v("3 years and counting")]),t._v(" though there are "),n("a",{attrs:{href:"https://github.com/AlexTatiyants/pev/issues"}},[t._v("several issues open")]),t._v(" and relevant pull requests pending. ")]),n("p",[t._v(" The current project has several goals: "),n("ul",[n("li",[t._v(" isolate the plan view component and its dependencies in order to use it in any web app "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" make it work with recent version of JS frameworks "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" upgrade Bootstrap to a more recent version "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" use VueJS just for a matter of taste "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" add ability to parse text format "),n("i",{staticClass:"fa fa-check text-success"})]),n("li",[t._v(" add support for new features (parallelism, triggers, disk usage, …) ")]),n("li",[t._v(" maintain the project to match upgrades in PostgreSQL. ")])])]),n("h2",[t._v(" Usage tips ")]),n("p",[t._v(" To get the most out of it, we recommend generating a query plan using the following line: "),n("code",[t._v("EXPLAIN (ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON)")]),t._v(". It is recommend submitting a (decently formatted) SQL query that generated the plan. ")]),n("p",[t._v(" PEV2 can also parse text although the JSON format usually has better support. ")]),n("h2",[t._v(" Help improve PEV2 ")]),n("p",[t._v(" You can help us. ")]),n("p",[t._v(" Report issues or contribute to the code on "),n("a",{attrs:{href:"https://github.com/dalibo/pev2"}},[t._v("Github")]),t._v(". ")]),n("hr"),n("div",{staticClass:"text-center text-muted"},[n("b",[t._v("pev2")]),t._v(" is brought to you by "),n("a",{attrs:{href:"https://dalibo.com"}},[t._v("Dalibo")])])])}],un={},pn=Object(g["a"])(un,ln,cn,!1,null,null,null),dn=pn.exports;a["a"].use(S["a"]);var fn=new S["a"]({routes:[{path:"/",name:"home",component:W},{path:"/plan",name:"plan",component:sn},{path:"/about",name:"about",component:dn}]});n("4989"),n("ab8b"),n("15f5");a["a"].config.productionTip=!1,new a["a"]({router:fn,render:function(t){return t(T)}}).$mount("#app")}});
//# sourceMappingURL=index.8368735e.js.map